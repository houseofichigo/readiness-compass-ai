const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/assessment-DLIsiJJf.js","assets/vendor-CuTMNHTd.js","assets/ui-3KHWhOC4.js"])))=>i.map(i=>d[i]);
var Ga=Object.defineProperty;var Dr=r=>{throw TypeError(r)};var Qa=(r,e,t)=>e in r?Ga(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var $s=(r,e,t)=>Qa(r,typeof e!="symbol"?e+"":e,t),Ms=(r,e,t)=>e.has(r)||Dr("Cannot "+t);var b=(r,e,t)=>(Ms(r,e,"read from private field"),t?t.call(r):e.get(r)),I=(r,e,t)=>e.has(r)?Dr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),N=(r,e,t,s)=>(Ms(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),H=(r,e,t)=>(Ms(r,e,"access private method"),t);var es=(r,e,t,s)=>({set _(n){N(r,e,n,t)},get _(){return b(r,e,s)}});import{p as Ja,c as Yn,u as bs,j as l,N as Xa,P as rt,O as Gn,a as Za,d as Qn,r as ds,b as K,Q as eo,G as to,U as so,E as ro,t as Jn,A as no,D as io,x as ao,W as oo,X as lo,y as co,Y as Xn,Z as Zn,_ as uo,$ as ei,a0 as ti,a1 as ho,a2 as fo,a3 as mo}from"./ui-3KHWhOC4.js";import{a as si,r as x,R as hs,g as po,c as ie}from"./vendor-CuTMNHTd.js";import{c as D,X as ri,k as go,l as ni,e as M,m as ii,B as he,R as vo,H as yo,n as Xs,o as ai,p as oi,q as li,A as wo,r as fs,d as ci,s as xo,a as fe,f as we,g as Ce,h as xe,T as Zs,i as kt,P as ui,S as xr,t as $e,v as bo,F as er,w as di,C as hi,U as fi,x as _o,I as tr,y as So,z as jo,D as ko,E as To,G as Po,J as Fs,K as mi,Q as Eo,V as $r,W as Co,Y as No,Z as Oo,_ as Ao,$ as Mr,a0 as pi,a1 as gi,a2 as Ro,u as vi,a3 as Ot,a4 as Io,a5 as yi,a6 as Lo,a7 as Do,a8 as $o,a9 as Mo,aa as Fo,ab as Uo,ac as qo,ad as Bo,ae as Wo,af as Ho,ag as Vo,ah as Ko,ai as zo,aj as je,ak as Yo}from"./assessment-DLIsiJJf.js";import{T as Go,u as wi,a as br,J as $t,A as Qo,b as Jo,c as Xo}from"./admin-DVz2u6aB.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var xi,Fr=si;xi=Fr.createRoot,Fr.hydrateRoot;var _r="ToastProvider",[Sr,Zo,el]=Ja("Toast"),[bi,am]=Yn("Toast",[el]),[tl,_s]=bi(_r),_i=r=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:a}=r,[o,c]=x.useState(null),[u,d]=x.useState(0),h=x.useRef(!1),f=x.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${_r}\`. Expected non-empty \`string\`.`),l.jsx(Sr.Provider,{scope:e,children:l.jsx(tl,{scope:e,label:t,duration:s,swipeDirection:n,swipeThreshold:i,toastCount:u,viewport:o,onViewportChange:c,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};_i.displayName=_r;var Si="ToastViewport",sl=["F8"],sr="toast.viewportPause",rr="toast.viewportResume",ji=x.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:s=sl,label:n="Notifications ({hotkey})",...i}=r,a=_s(Si,t),o=Zo(t),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),h=x.useRef(null),f=bs(e,h,a.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;x.useEffect(()=>{const v=_=>{var y;s.length!==0&&s.every(w=>_[w]||_.code===w)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s]),x.useEffect(()=>{const v=c.current,_=h.current;if(m&&v&&_){const S=()=>{if(!a.isClosePausedRef.current){const k=new CustomEvent(sr);_.dispatchEvent(k),a.isClosePausedRef.current=!0}},y=()=>{if(a.isClosePausedRef.current){const k=new CustomEvent(rr);_.dispatchEvent(k),a.isClosePausedRef.current=!1}},w=k=>{!v.contains(k.relatedTarget)&&y()},j=()=>{v.contains(document.activeElement)||y()};return v.addEventListener("focusin",S),v.addEventListener("focusout",w),v.addEventListener("pointermove",S),v.addEventListener("pointerleave",j),window.addEventListener("blur",S),window.addEventListener("focus",y),()=>{v.removeEventListener("focusin",S),v.removeEventListener("focusout",w),v.removeEventListener("pointermove",S),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",S),window.removeEventListener("focus",y)}}},[m,a.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:v})=>{const S=o().map(y=>{const w=y.ref.current,j=[w,...pl(w)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?S.reverse():S).flat()},[o]);return x.useEffect(()=>{const v=h.current;if(v){const _=S=>{var j,k,T;const y=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!y){const A=document.activeElement,R=S.shiftKey;if(S.target===v&&R){(j=u.current)==null||j.focus();return}const _e=g({tabbingDirection:R?"backwards":"forwards"}),Y=_e.findIndex(P=>P===A);Us(_e.slice(Y+1))?S.preventDefault():R?(k=u.current)==null||k.focus():(T=d.current)==null||T.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[o,g]),l.jsxs(Xa,{ref:c,role:"region","aria-label":n.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&l.jsx(nr,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});Us(v)}}),l.jsx(Sr.Slot,{scope:t,children:l.jsx(rt.ol,{tabIndex:-1,...i,ref:f})}),m&&l.jsx(nr,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});Us(v)}})]})});ji.displayName=Si;var ki="ToastFocusProxy",nr=x.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...n}=r,i=_s(ki,t);return l.jsx(Gn,{"aria-hidden":!0,tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(o))&&s()}})});nr.displayName=ki;var Ss="Toast",rl="toast.swipeStart",nl="toast.swipeMove",il="toast.swipeCancel",al="toast.swipeEnd",Ti=x.forwardRef((r,e)=>{const{forceMount:t,open:s,defaultOpen:n,onOpenChange:i,...a}=r,[o=!0,c]=Za({prop:s,defaultProp:n,onChange:i});return l.jsx(Qn,{present:t||o,children:l.jsx(cl,{open:o,...a,ref:e,onClose:()=>c(!1),onPause:ds(r.onPause),onResume:ds(r.onResume),onSwipeStart:K(r.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:K(r.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:K(r.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:K(r.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Ti.displayName=Ss;var[ol,ll]=bi(Ss,{onClose(){}}),cl=x.forwardRef((r,e)=>{const{__scopeToast:t,type:s="foreground",duration:n,open:i,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...m}=r,g=_s(Ss,t),[v,_]=x.useState(null),S=bs(e,P=>_(P)),y=x.useRef(null),w=x.useRef(null),j=n||g.duration,k=x.useRef(0),T=x.useRef(j),A=x.useRef(0),{onToastAdd:R,onToastRemove:U}=g,Ne=ds(()=>{var G;(v==null?void 0:v.contains(document.activeElement))&&((G=g.viewport)==null||G.focus()),a()}),_e=x.useCallback(P=>{!P||P===1/0||(window.clearTimeout(A.current),k.current=new Date().getTime(),A.current=window.setTimeout(Ne,P))},[Ne]);x.useEffect(()=>{const P=g.viewport;if(P){const G=()=>{_e(T.current),u==null||u()},q=()=>{const Q=new Date().getTime()-k.current;T.current=T.current-Q,window.clearTimeout(A.current),c==null||c()};return P.addEventListener(sr,q),P.addEventListener(rr,G),()=>{P.removeEventListener(sr,q),P.removeEventListener(rr,G)}}},[g.viewport,j,c,u,_e]),x.useEffect(()=>{i&&!g.isClosePausedRef.current&&_e(j)},[i,j,g.isClosePausedRef,_e]),x.useEffect(()=>(R(),()=>U()),[R,U]);const Y=x.useMemo(()=>v?Ri(v):null,[v]);return g.viewport?l.jsxs(l.Fragment,{children:[Y&&l.jsx(ul,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:Y}),l.jsx(ol,{scope:t,onClose:Ne,children:si.createPortal(l.jsx(Sr.ItemSlot,{scope:t,children:l.jsx(eo,{asChild:!0,onEscapeKeyDown:K(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||Ne(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(rt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:S,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:K(r.onKeyDown,P=>{P.key==="Escape"&&(o==null||o(P.nativeEvent),P.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,Ne()))}),onPointerDown:K(r.onPointerDown,P=>{P.button===0&&(y.current={x:P.clientX,y:P.clientY})}),onPointerMove:K(r.onPointerMove,P=>{if(!y.current)return;const G=P.clientX-y.current.x,q=P.clientY-y.current.y,Q=!!w.current,ae=["left","right"].includes(g.swipeDirection),Se=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Zt=ae?Se(0,G):0,J=ae?0:Se(0,q),oe=P.pointerType==="touch"?10:2,pe={x:Zt,y:J},Nt={originalEvent:P,delta:pe};Q?(w.current=pe,ts(nl,h,Nt,{discrete:!1})):Ur(pe,g.swipeDirection,oe)?(w.current=pe,ts(rl,d,Nt,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(G)>oe||Math.abs(q)>oe)&&(y.current=null)}),onPointerUp:K(r.onPointerUp,P=>{const G=w.current,q=P.target;if(q.hasPointerCapture(P.pointerId)&&q.releasePointerCapture(P.pointerId),w.current=null,y.current=null,G){const Q=P.currentTarget,ae={originalEvent:P,delta:G};Ur(G,g.swipeDirection,g.swipeThreshold)?ts(al,p,ae,{discrete:!0}):ts(il,f,ae,{discrete:!0}),Q.addEventListener("click",Se=>Se.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),ul=r=>{const{__scopeToast:e,children:t,...s}=r,n=_s(Ss,e),[i,a]=x.useState(!1),[o,c]=x.useState(!1);return fl(()=>a(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:l.jsx(to,{asChild:!0,children:l.jsx(Gn,{...s,children:i&&l.jsxs(l.Fragment,{children:[n.label," ",t]})})})},dl="ToastTitle",Pi=x.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return l.jsx(rt.div,{...s,ref:e})});Pi.displayName=dl;var hl="ToastDescription",Ei=x.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return l.jsx(rt.div,{...s,ref:e})});Ei.displayName=hl;var Ci="ToastAction",Ni=x.forwardRef((r,e)=>{const{altText:t,...s}=r;return t.trim()?l.jsx(Ai,{altText:t,asChild:!0,children:l.jsx(jr,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ci}\`. Expected non-empty \`string\`.`),null)});Ni.displayName=Ci;var Oi="ToastClose",jr=x.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r,n=ll(Oi,t);return l.jsx(Ai,{asChild:!0,children:l.jsx(rt.button,{type:"button",...s,ref:e,onClick:K(r.onClick,n.onClose)})})});jr.displayName=Oi;var Ai=x.forwardRef((r,e)=>{const{__scopeToast:t,altText:s,...n}=r;return l.jsx(rt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:e})});function Ri(r){const e=[];return Array.from(r.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),ml(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Ri(s))}}),e}function ts(r,e,t,{discrete:s}){const n=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?ro(n,i):n.dispatchEvent(i)}var Ur=(r,e,t=0)=>{const s=Math.abs(r.x),n=Math.abs(r.y),i=s>n;return e==="left"||e==="right"?i&&s>t:!i&&n>t};function fl(r=()=>{}){const e=ds(r);so(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function ml(r){return r.nodeType===r.ELEMENT_NODE}function pl(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Us(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var gl=_i,Ii=ji,Li=Ti,Di=Pi,$i=Ei,Mi=Ni,Fi=jr;const vl=gl,Ui=x.forwardRef(({className:r,...e},t)=>l.jsx(Ii,{ref:t,className:D("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));Ui.displayName=Ii.displayName;const yl=go("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qi=x.forwardRef(({className:r,variant:e,...t},s)=>l.jsx(Li,{ref:s,className:D(yl({variant:e}),r),...t}));qi.displayName=Li.displayName;const wl=x.forwardRef(({className:r,...e},t)=>l.jsx(Mi,{ref:t,className:D("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));wl.displayName=Mi.displayName;const Bi=x.forwardRef(({className:r,...e},t)=>l.jsx(Fi,{ref:t,className:D("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:l.jsx(ri,{className:"h-4 w-4"})}));Bi.displayName=Fi.displayName;const Wi=x.forwardRef(({className:r,...e},t)=>l.jsx(Di,{ref:t,className:D("text-sm font-semibold",r),...e}));Wi.displayName=Di.displayName;const Hi=x.forwardRef(({className:r,...e},t)=>l.jsx($i,{ref:t,className:D("text-sm opacity-90",r),...e}));Hi.displayName=$i.displayName;function xl(){const{toasts:r}=ni();return l.jsxs(vl,{children:[r.map(function({id:e,title:t,description:s,action:n,...i}){return l.jsxs(qi,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Wi,{children:t}),s&&l.jsx(Hi,{children:s})]}),n,l.jsx(Bi,{})]},e)}),l.jsx(Ui,{})]})}var qr=["light","dark"],bl="(prefers-color-scheme: dark)",_l=x.createContext(void 0),Sl={setTheme:r=>{},themes:[]},jl=()=>{var r;return(r=x.useContext(_l))!=null?r:Sl};x.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:i,value:a,attrs:o,nonce:c})=>{let u=i==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=n?qr.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,v=!0)=>{let _=a?a[m]:m,S=g?m+"|| ''":`'${_}'`,y="";return n&&v&&!g&&qr.includes(m)&&(y+=`d.style.colorScheme = '${m}';`),t==="class"?g||_?y+=`c.add(${S})`:y+="null":_&&(y+=`d[s](n,${S})`),y},p=r?`!function(){${d}${f(r)}}()`:s?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${bl}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return x.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});const kl=({...r})=>{const{theme:e="system"}=jl();return l.jsx(Go,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};var[js,om]=Yn("Tooltip",[Jn]),kr=Jn(),Vi="TooltipProvider",Tl=700,Br="tooltip.open",[Pl,Ki]=js(Vi),zi=r=>{const{__scopeTooltip:e,delayDuration:t=Tl,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:i}=r,[a,o]=x.useState(!0),c=x.useRef(!1),u=x.useRef(0);return x.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),l.jsx(Pl,{scope:e,isOpenDelayed:a,delayDuration:t,onOpen:x.useCallback(()=>{window.clearTimeout(u.current),o(!1)},[]),onClose:x.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o(!0),s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:x.useCallback(d=>{c.current=d},[]),disableHoverableContent:n,children:i})};zi.displayName=Vi;var Yi="Tooltip",[lm,ks]=js(Yi),ir="TooltipTrigger",El=x.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=ks(ir,t),i=Ki(ir,t),a=kr(t),o=x.useRef(null),c=bs(e,o,n.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),h=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(no,{asChild:!0,...a,children:l.jsx(rt.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:K(r.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),d.current=!0)}),onPointerLeave:K(r.onPointerLeave,()=>{n.onTriggerLeave(),d.current=!1}),onPointerDown:K(r.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:K(r.onFocus,()=>{u.current||n.onOpen()}),onBlur:K(r.onBlur,n.onClose),onClick:K(r.onClick,n.onClose)})})});El.displayName=ir;var Cl="TooltipPortal",[cm,Nl]=js(Cl,{forceMount:void 0}),Tt="TooltipContent",Gi=x.forwardRef((r,e)=>{const t=Nl(Tt,r.__scopeTooltip),{forceMount:s=t.forceMount,side:n="top",...i}=r,a=ks(Tt,r.__scopeTooltip);return l.jsx(Qn,{present:s||a.open,children:a.disableHoverableContent?l.jsx(Qi,{side:n,...i,ref:e}):l.jsx(Ol,{side:n,...i,ref:e})})}),Ol=x.forwardRef((r,e)=>{const t=ks(Tt,r.__scopeTooltip),s=Ki(Tt,r.__scopeTooltip),n=x.useRef(null),i=bs(e,n),[a,o]=x.useState(null),{trigger:c,onClose:u}=t,d=n.current,{onPointerInTransitChange:h}=s,f=x.useCallback(()=>{o(null),h(!1)},[h]),p=x.useCallback((m,g)=>{const v=m.currentTarget,_={x:m.clientX,y:m.clientY},S=Ll(_,v.getBoundingClientRect()),y=Dl(_,S),w=$l(g.getBoundingClientRect()),j=Fl([...y,...w]);o(j),h(!0)},[h]);return x.useEffect(()=>()=>f(),[f]),x.useEffect(()=>{if(c&&d){const m=v=>p(v,d),g=v=>p(v,c);return c.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[c,d,p,f]),x.useEffect(()=>{if(a){const m=g=>{const v=g.target,_={x:g.clientX,y:g.clientY},S=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),y=!Ml(_,a);S?f():y&&(f(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,d,a,u,f]),l.jsx(Qi,{...r,ref:i})}),[Al,Rl]=js(Yi,{isInside:!1}),Qi=x.forwardRef((r,e)=>{const{__scopeTooltip:t,children:s,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:a,...o}=r,c=ks(Tt,t),u=kr(t),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(Br,d),()=>document.removeEventListener(Br,d)),[d]),x.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(io,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(ao,{"data-state":c.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(oo,{children:s}),l.jsx(Al,{scope:t,isInside:!0,children:l.jsx(lo,{id:c.contentId,role:"tooltip",children:n||s})})]})})});Gi.displayName=Tt;var Ji="TooltipArrow",Il=x.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=kr(t);return Rl(Ji,t).isInside?null:l.jsx(co,{...n,...s,ref:e})});Il.displayName=Ji;function Ll(r,e){const t=Math.abs(e.top-r.y),s=Math.abs(e.bottom-r.y),n=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,s,n,i)){case i:return"left";case n:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Dl(r,e,t=5){const s=[];switch(e){case"top":s.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":s.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":s.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":s.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return s}function $l(r){const{top:e,right:t,bottom:s,left:n}=r;return[{x:n,y:e},{x:t,y:e},{x:t,y:s},{x:n,y:s}]}function Ml(r,e){const{x:t,y:s}=r;let n=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>s!=d>s&&t<(u-o)*(s-c)/(d-c)+o&&(n=!n)}return n}function Fl(r){const e=r.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),Ul(e)}function Ul(r){if(r.length<=1)return r.slice();const e=[];for(let s=0;s<r.length;s++){const n=r[s];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(n.y-a.y)>=(i.y-a.y)*(n.x-a.x))e.pop();else break}e.push(n)}e.pop();const t=[];for(let s=r.length-1;s>=0;s--){const n=r[s];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(n.y-a.y)>=(i.y-a.y)*(n.x-a.x))t.pop();else break}t.push(n)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var ql=zi,Xi=Gi;const Bl=ql,Wl=x.forwardRef(({className:r,sideOffset:e=4,...t},s)=>l.jsx(Xi,{ref:s,sideOffset:e,className:D("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Wl.displayName=Xi.displayName;var Ts=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ps=typeof window>"u"||"Deno"in globalThis;function ce(){}function Hl(r,e){return typeof r=="function"?r(e):r}function Vl(r){return typeof r=="number"&&r>=0&&r!==1/0}function Kl(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Wr(r,e){return typeof r=="function"?r(e):r}function zl(r,e){return typeof r=="function"?r(e):r}function Hr(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:o}=r;if(a){if(s){if(e.queryHash!==Tr(a,e.options))return!1}else if(!Ht(e.queryKey,a))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||n&&n!==e.state.fetchStatus||i&&!i(e))}function Vr(r,e){const{exact:t,status:s,predicate:n,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Wt(e.options.mutationKey)!==Wt(i))return!1}else if(!Ht(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Tr(r,e){return((e==null?void 0:e.queryKeyHashFn)||Wt)(r)}function Wt(r){return JSON.stringify(r,(e,t)=>ar(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function Ht(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Ht(r[t],e[t])):!1}function Zi(r,e){if(r===e)return r;const t=Kr(r)&&Kr(e);if(t||ar(r)&&ar(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{};let c=0;for(let u=0;u<a;u++){const d=t?u:i[u];(!t&&s.includes(d)||t)&&r[d]===void 0&&e[d]===void 0?(o[d]=void 0,c++):(o[d]=Zi(r[d],e[d]),o[d]===r[d]&&r[d]!==void 0&&c++)}return n===a&&c===n?r:o}return e}function Kr(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function ar(r){if(!zr(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!zr(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function zr(r){return Object.prototype.toString.call(r)==="[object Object]"}function Yl(r){return new Promise(e=>{setTimeout(e,r)})}function Gl(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Zi(r,e):e}function Ql(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function Jl(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Pr=Symbol();function ea(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Pr?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var Je,Ue,gt,Un,Xl=(Un=class extends Ts{constructor(){super();I(this,Je);I(this,Ue);I(this,gt);N(this,gt,e=>{if(!Ps&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){b(this,Ue)||this.setEventListener(b(this,gt))}onUnsubscribe(){var e;this.hasListeners()||((e=b(this,Ue))==null||e.call(this),N(this,Ue,void 0))}setEventListener(e){var t;N(this,gt,e),(t=b(this,Ue))==null||t.call(this),N(this,Ue,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){b(this,Je)!==e&&(N(this,Je,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof b(this,Je)=="boolean"?b(this,Je):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Je=new WeakMap,Ue=new WeakMap,gt=new WeakMap,Un),ta=new Xl,vt,qe,yt,qn,Zl=(qn=class extends Ts{constructor(){super();I(this,vt,!0);I(this,qe);I(this,yt);N(this,yt,e=>{if(!Ps&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){b(this,qe)||this.setEventListener(b(this,yt))}onUnsubscribe(){var e;this.hasListeners()||((e=b(this,qe))==null||e.call(this),N(this,qe,void 0))}setEventListener(e){var t;N(this,yt,e),(t=b(this,qe))==null||t.call(this),N(this,qe,e(this.setOnline.bind(this)))}setOnline(e){b(this,vt)!==e&&(N(this,vt,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return b(this,vt)}},vt=new WeakMap,qe=new WeakMap,yt=new WeakMap,qn),ms=new Zl;function ec(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function tc(r){return Math.min(1e3*2**r,3e4)}function sa(r){return(r??"online")==="online"?ms.isOnline():!0}var ra=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function qs(r){return r instanceof ra}function na(r){let e=!1,t=0,s=!1,n;const i=ec(),a=g=>{var v;s||(f(new ra(g)),(v=r.abort)==null||v.call(r))},o=()=>{e=!0},c=()=>{e=!1},u=()=>ta.isFocused()&&(r.networkMode==="always"||ms.isOnline())&&r.canRun(),d=()=>sa(r.networkMode)&&r.canRun(),h=g=>{var v;s||(s=!0,(v=r.onSuccess)==null||v.call(r,g),n==null||n(),i.resolve(g))},f=g=>{var v;s||(s=!0,(v=r.onError)==null||v.call(r,g),n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=_=>{(s||u())&&g(_)},(v=r.onPause)==null||v.call(r)}).then(()=>{var g;n=void 0,s||(g=r.onContinue)==null||g.call(r)}),m=()=>{if(s)return;let g;const v=t===0?r.initialPromise:void 0;try{g=v??r.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(h).catch(_=>{var k;if(s)return;const S=r.retry??(Ps?0:3),y=r.retryDelay??tc,w=typeof y=="function"?y(t,_):y,j=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,_);if(e||!j){f(_);return}t++,(k=r.onFail)==null||k.call(r,t,_),Yl(w).then(()=>u()?void 0:p()).then(()=>{e?f(_):m()})})};return{promise:i,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?m():p().then(m),i)}}function sc(){let r=[],e=0,t=o=>{o()},s=o=>{o()},n=o=>setTimeout(o,0);const i=o=>{e?r.push(o):n(()=>{t(o)})},a=()=>{const o=r;r=[],o.length&&n(()=>{s(()=>{o.forEach(c=>{t(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||a()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var Z=sc(),Xe,Bn,ia=(Bn=class{constructor(){I(this,Xe)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vl(this.gcTime)&&N(this,Xe,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Ps?1/0:5*60*1e3))}clearGcTimeout(){b(this,Xe)&&(clearTimeout(b(this,Xe)),N(this,Xe,void 0))}},Xe=new WeakMap,Bn),wt,xt,ne,V,Gt,Ze,ue,ke,Wn,rc=(Wn=class extends ia{constructor(e){super();I(this,ue);I(this,wt);I(this,xt);I(this,ne);I(this,V);I(this,Gt);I(this,Ze);N(this,Ze,!1),N(this,Gt,e.defaultOptions),this.setOptions(e.options),this.observers=[],N(this,ne,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,N(this,wt,ic(this.options)),this.state=e.state??b(this,wt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=b(this,V))==null?void 0:e.promise}setOptions(e){this.options={...b(this,Gt),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&b(this,ne).remove(this)}setData(e,t){const s=Gl(this.state.data,e,this.options);return H(this,ue,ke).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){H(this,ue,ke).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=b(this,V))==null?void 0:s.promise;return(n=b(this,V))==null||n.cancel(e),t?t.then(ce).catch(ce):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,wt))}isActive(){return this.observers.some(e=>zl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Kl(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=b(this,V))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=b(this,V))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),b(this,ne).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(b(this,V)&&(b(this,Ze)?b(this,V).cancel({revert:!0}):b(this,V).cancelRetry()),this.scheduleGc()),b(this,ne).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||H(this,ue,ke).call(this,{type:"invalidate"})}fetch(e,t){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(b(this,V))return b(this,V).continueRetry(),b(this,V).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(N(this,Ze,!0),s.signal)})},i=()=>{const h=ea(this.options,t),f={queryKey:this.queryKey,meta:this.meta};return n(f),N(this,Ze,!1),this.options.persister?this.options.persister(h,f,this):h(f)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(a),(c=this.options.behavior)==null||c.onFetch(a,this),N(this,xt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&H(this,ue,ke).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const o=h=>{var f,p,m,g;qs(h)&&h.silent||H(this,ue,ke).call(this,{type:"error",error:h}),qs(h)||((p=(f=b(this,ne).config).onError)==null||p.call(f,h,this),(g=(m=b(this,ne).config).onSettled)==null||g.call(m,this.state.data,h,this)),this.scheduleGc()};return N(this,V,na({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var f,p,m,g;if(h===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){o(v);return}(p=(f=b(this,ne).config).onSuccess)==null||p.call(f,h,this),(g=(m=b(this,ne).config).onSettled)==null||g.call(m,h,this.state.error,this),this.scheduleGc()},onError:o,onFail:(h,f)=>{H(this,ue,ke).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{H(this,ue,ke).call(this,{type:"pause"})},onContinue:()=>{H(this,ue,ke).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),b(this,V).start()}},wt=new WeakMap,xt=new WeakMap,ne=new WeakMap,V=new WeakMap,Gt=new WeakMap,Ze=new WeakMap,ue=new WeakSet,ke=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...nc(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return qs(n)&&n.revert&&b(this,xt)?{...b(this,xt),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Z.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),b(this,ne).notify({query:this,type:"updated",action:e})})},Wn);function nc(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sa(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ic(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ge,Hn,ac=(Hn=class extends Ts{constructor(e={}){super();I(this,ge);this.config=e,N(this,ge,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??Tr(n,t);let a=this.get(i);return a||(a=new rc({cache:this,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){b(this,ge).has(e.queryHash)||(b(this,ge).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=b(this,ge).get(e.queryHash);t&&(e.destroy(),t===e&&b(this,ge).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Z.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return b(this,ge).get(e)}getAll(){return[...b(this,ge).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Hr(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Hr(e,s)):t}notify(e){Z.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Z.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Z.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ge=new WeakMap,Hn),ve,X,et,ye,Re,Vn,oc=(Vn=class extends ia{constructor(e){super();I(this,ye);I(this,ve);I(this,X);I(this,et);this.mutationId=e.mutationId,N(this,X,e.mutationCache),N(this,ve,[]),this.state=e.state||lc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){b(this,ve).includes(e)||(b(this,ve).push(e),this.clearGcTimeout(),b(this,X).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){N(this,ve,b(this,ve).filter(t=>t!==e)),this.scheduleGc(),b(this,X).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){b(this,ve).length||(this.state.status==="pending"?this.scheduleGc():b(this,X).remove(this))}continue(){var e;return((e=b(this,et))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var n,i,a,o,c,u,d,h,f,p,m,g,v,_,S,y,w,j,k,T;N(this,et,na({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,R)=>{H(this,ye,Re).call(this,{type:"failed",failureCount:A,error:R})},onPause:()=>{H(this,ye,Re).call(this,{type:"pause"})},onContinue:()=>{H(this,ye,Re).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,X).canRun(this)}));const t=this.state.status==="pending",s=!b(this,et).canStart();try{if(!t){H(this,ye,Re).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(n=b(this,X).config).onMutate)==null?void 0:i.call(n,e,this));const R=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e));R!==this.state.context&&H(this,ye,Re).call(this,{type:"pending",context:R,variables:e,isPaused:s})}const A=await b(this,et).start();return await((u=(c=b(this,X).config).onSuccess)==null?void 0:u.call(c,A,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,A,e,this.state.context)),await((p=(f=b(this,X).config).onSettled)==null?void 0:p.call(f,A,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,A,null,e,this.state.context)),H(this,ye,Re).call(this,{type:"success",data:A}),A}catch(A){try{throw await((_=(v=b(this,X).config).onError)==null?void 0:_.call(v,A,e,this.state.context,this)),await((y=(S=this.options).onError)==null?void 0:y.call(S,A,e,this.state.context)),await((j=(w=b(this,X).config).onSettled)==null?void 0:j.call(w,void 0,A,this.state.variables,this.state.context,this)),await((T=(k=this.options).onSettled)==null?void 0:T.call(k,void 0,A,e,this.state.context)),A}finally{H(this,ye,Re).call(this,{type:"error",error:A})}}finally{b(this,X).runNext(this)}}},ve=new WeakMap,X=new WeakMap,et=new WeakMap,ye=new WeakSet,Re=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Z.batch(()=>{b(this,ve).forEach(s=>{s.onMutationUpdate(e)}),b(this,X).notify({mutation:this,type:"updated",action:e})})},Vn);function lc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var re,Qt,Kn,cc=(Kn=class extends Ts{constructor(e={}){super();I(this,re);I(this,Qt);this.config=e,N(this,re,new Map),N(this,Qt,Date.now())}build(e,t,s){const n=new oc({mutationCache:this,mutationId:++es(this,Qt)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){const t=ss(e),s=b(this,re).get(t)??[];s.push(e),b(this,re).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var s;const t=ss(e);if(b(this,re).has(t)){const n=(s=b(this,re).get(t))==null?void 0:s.filter(i=>i!==e);n&&(n.length===0?b(this,re).delete(t):b(this,re).set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const t=(s=b(this,re).get(ss(e)))==null?void 0:s.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){var s;const t=(s=b(this,re).get(ss(e)))==null?void 0:s.find(n=>n!==e&&n.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Z.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...b(this,re).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Vr(t,s))}findAll(e={}){return this.getAll().filter(t=>Vr(e,t))}notify(e){Z.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Z.batch(()=>Promise.all(e.map(t=>t.continue().catch(ce))))}},re=new WeakMap,Qt=new WeakMap,Kn);function ss(r){var e;return((e=r.options.scope)==null?void 0:e.id)??String(r.mutationId)}function Yr(r){return{onFetch:(e,t)=>{var d,h,f,p,m;const s=e.options,n=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],a=((m=e.state.data)==null?void 0:m.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},_=ea(e.options,e.fetchOptions),S=async(y,w,j)=>{if(g)return Promise.reject();if(w==null&&y.pages.length)return Promise.resolve(y);const k={queryKey:e.queryKey,pageParam:w,direction:j?"backward":"forward",meta:e.options.meta};v(k);const T=await _(k),{maxPages:A}=e.options,R=j?Jl:Ql;return{pages:R(y.pages,T,A),pageParams:R(y.pageParams,w,A)}};if(n&&i.length){const y=n==="backward",w=y?uc:Gr,j={pages:i,pageParams:a},k=w(s,j);o=await S(j,k,y)}else{const y=r??i.length;do{const w=c===0?a[0]??s.initialPageParam:Gr(s,o);if(c>0&&w==null)break;o=await S(o,w),c++}while(c<y)}return o};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function Gr(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function uc(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var F,Be,We,bt,_t,He,St,jt,zn,dc=(zn=class{constructor(r={}){I(this,F);I(this,Be);I(this,We);I(this,bt);I(this,_t);I(this,He);I(this,St);I(this,jt);N(this,F,r.queryCache||new ac),N(this,Be,r.mutationCache||new cc),N(this,We,r.defaultOptions||{}),N(this,bt,new Map),N(this,_t,new Map),N(this,He,0)}mount(){es(this,He)._++,b(this,He)===1&&(N(this,St,ta.subscribe(async r=>{r&&(await this.resumePausedMutations(),b(this,F).onFocus())})),N(this,jt,ms.subscribe(async r=>{r&&(await this.resumePausedMutations(),b(this,F).onOnline())})))}unmount(){var r,e;es(this,He)._--,b(this,He)===0&&((r=b(this,St))==null||r.call(this),N(this,St,void 0),(e=b(this,jt))==null||e.call(this),N(this,jt,void 0))}isFetching(r){return b(this,F).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return b(this,Be).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=b(this,F).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.getQueryData(r.queryKey);if(e===void 0)return this.fetchQuery(r);{const t=this.defaultQueryOptions(r),s=b(this,F).build(this,t);return r.revalidateIfStale&&s.isStaleByTime(Wr(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(r){return b(this,F).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=b(this,F).get(s.queryHash),i=n==null?void 0:n.state.data,a=Hl(e,i);if(a!==void 0)return b(this,F).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return Z.batch(()=>b(this,F).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=b(this,F).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=b(this,F);Z.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=b(this,F),s={type:"active",...r};return Z.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries(s,e)))}cancelQueries(r={},e={}){const t={revert:!0,...e},s=Z.batch(()=>b(this,F).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(ce).catch(ce)}invalidateQueries(r={},e={}){return Z.batch(()=>{if(b(this,F).findAll(r).forEach(s=>{s.invalidate()}),r.refetchType==="none")return Promise.resolve();const t={...r,type:r.refetchType??r.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(r={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=Z.batch(()=>b(this,F).findAll(r).filter(n=>!n.isDisabled()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(ce)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ce)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=b(this,F).build(this,e);return t.isStaleByTime(Wr(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(ce).catch(ce)}fetchInfiniteQuery(r){return r.behavior=Yr(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(ce).catch(ce)}ensureInfiniteQueryData(r){return r.behavior=Yr(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return ms.isOnline()?b(this,Be).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,F)}getMutationCache(){return b(this,Be)}getDefaultOptions(){return b(this,We)}setDefaultOptions(r){N(this,We,r)}setQueryDefaults(r,e){b(this,bt).set(Wt(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...b(this,bt).values()];let t={};return e.forEach(s=>{Ht(r,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(r,e){b(this,_t).set(Wt(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...b(this,_t).values()];let t={};return e.forEach(s=>{Ht(r,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...b(this,We).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Tr(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Pr&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...b(this,We).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){b(this,F).clear(),b(this,Be).clear()}},F=new WeakMap,Be=new WeakMap,We=new WeakMap,bt=new WeakMap,_t=new WeakMap,He=new WeakMap,St=new WeakMap,jt=new WeakMap,zn),hc=x.createContext(void 0),fc=({client:r,children:e})=>(x.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),l.jsx(hc.Provider,{value:r,children:e}));class mc extends x.Component{constructor(t){super(t);$s(this,"handleReload",()=>{window.location.reload()});$s(this,"handleGoHome",()=>{typeof window<"u"&&(window.location.href="/")});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s}),console.error("Error caught by boundary:",t,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-background",children:l.jsxs(M,{className:"max-w-md w-full p-8 text-center space-y-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx(ii,{className:"h-16 w-16 text-destructive"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Something went wrong"}),l.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page or return to home."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[l.jsxs(he,{onClick:this.handleReload,className:"flex items-center gap-2",children:[l.jsx(vo,{className:"h-4 w-4"}),"Reload Page"]}),l.jsxs(he,{variant:"outline",onClick:this.handleGoHome,className:"flex items-center gap-2",children:[l.jsx(yo,{className:"h-4 w-4"}),"Go Home"]})]}),!1]})}):this.props.children}}function pc({children:r,requireAdmin:e=!0}){const{user:t,isAdmin:s,isLoading:n}=wi();return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Xs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):t?e&&!s?l.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:l.jsxs(oi,{className:"max-w-md",variant:"destructive",children:[l.jsx(ii,{className:"h-4 w-4"}),l.jsx(li,{children:"Access denied. You don't have administrator privileges for this application."})]})}):l.jsx(l.Fragment,{children:r}):l.jsx(ai,{to:"/admin/login",replace:!0})}function gc(){const{analytics:r,submissions:e,isLoading:t}=br(),[s,n]=x.useState(0);if(x.useEffect(()=>{const h=setInterval(()=>{n(f=>f+Math.floor(Math.random()*3))},5e3);return()=>clearInterval(h)},[]),t)return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((h,f)=>l.jsx("div",{className:"h-32 bg-muted rounded"},f))})]})});const i=(r==null?void 0:r.today_submissions)||0,a=i>0?(((r==null?void 0:r.today_submissions)||0)/i*100-100).toFixed(1):"0",o=(r==null?void 0:r.week_submissions)||0,c=e.filter(h=>h.completed&&h.organization_name).slice(0,1)[0],u=[{title:"Live Activity",value:s,description:"Active sessions",icon:wo,trend:null,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-950",indicator:l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})},{title:"Today's Impact",value:(r==null?void 0:r.today_submissions)||0,description:`${a}% vs yesterday`,icon:fs,trend:parseFloat(a)>=0?"up":"down",color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-950"},{title:"Weekly Growth",value:o,description:"submissions this week",icon:ci,trend:o>0?"up":null,color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-950"},{title:"Top Performer",value:(c==null?void 0:c.organization_name)||"No data",description:c?"Latest completion":"awaiting data",icon:xo,trend:null,color:"text-yellow-600",bgColor:"bg-yellow-50 dark:bg-yellow-950",badge:c&&l.jsx(fe,{className:"ml-auto",children:"★"})}],d=[{label:"Completion Rate",value:(r==null?void 0:r.completion_rate)||0,target:85,unit:"%"},{label:"Client Growth",value:(r==null?void 0:r.active_organizations)||0,target:50,unit:""},{label:"Engagement Score",value:87,target:90,unit:"%"},{label:"Data Quality",value:94,target:95,unit:"%"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-lg p-6 text-white",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Executive Dashboard"}),l.jsx("p",{className:"text-purple-100",children:"Real-time insights and business intelligence"})]}),l.jsx(fe,{className:"bg-white/20 text-white",children:"Enterprise"})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.map((h,f)=>l.jsxs(M,{className:"relative overflow-hidden",children:[l.jsx(we,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:h.title}),l.jsx("div",{className:D("p-2 rounded-lg",h.bgColor),children:l.jsx(h.icon,{className:D("h-4 w-4",h.color)})})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold",children:typeof h.value=="string"?h.value.length>15?`${h.value.substring(0,15)}...`:h.value:h.value.toLocaleString()}),l.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[h.trend==="up"&&l.jsx(fs,{className:"w-3 h-3 text-green-500 mr-1"}),h.trend==="down"&&l.jsx(Zs,{className:"w-3 h-3 text-red-500 mr-1"}),h.description]})]}),l.jsxs("div",{className:"flex items-center",children:[h.indicator,h.badge]})]})})]},f))}),l.jsxs(M,{children:[l.jsxs(we,{children:[l.jsx(Ce,{children:"Key Performance Indicators"}),l.jsx(kt,{children:"Track progress against business targets"})]}),l.jsx(xe,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((h,f)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium",children:h.label}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[h.value,h.unit," / ",h.target,h.unit]})]}),l.jsx(ui,{value:h.value/h.target*100,className:"h-2"}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:"Current"}),l.jsx("span",{children:"Target"})]})]},f))})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(M,{children:[l.jsx(we,{children:l.jsxs(Ce,{className:"flex items-center",children:[l.jsx(xr,{className:"mr-2 h-5 w-5"}),"Security Status"]})}),l.jsx(xe,{children:l.jsx("div",{className:"space-y-3",children:[{label:"Data Encryption",status:"Active",color:"text-green-600"},{label:"GDPR Compliance",status:"Compliant",color:"text-green-600"},{label:"Audit Logging",status:"Enabled",color:"text-green-600"},{label:"Access Control",status:"Protected",color:"text-green-600"}].map((h,f)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm",children:h.label}),l.jsxs("div",{className:"flex items-center",children:[l.jsx($e,{className:D("h-4 w-4 mr-1",h.color)}),l.jsx("span",{className:D("text-sm font-medium",h.color),children:h.status})]})]},f))})})]}),l.jsxs(M,{children:[l.jsxs(we,{children:[l.jsx(Ce,{children:"Top Organizations"}),l.jsx(kt,{children:"Leading assessment completions"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-3",children:[e.filter(h=>h.completed&&h.organization_name).slice(0,5).map((h,f)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:D("w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium mr-3",f===0?"bg-yellow-100 text-yellow-800":f===1?"bg-gray-100 text-gray-800":f===2?"bg-orange-100 text-orange-800":"bg-muted text-muted-foreground"),children:f+1}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:h.organization_name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.track," track"]})]})]}),f===0&&l.jsx(bo,{className:"h-4 w-4 text-yellow-500"})]},h.id)),e.filter(h=>h.completed&&h.organization_name).length===0&&l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No completed assessments yet"})]})})]})]})]})}function vc(){const{analytics:r,isLoading:e}=br();if(e)return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-6"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((o,c)=>l.jsx("div",{className:"h-32 bg-muted rounded"},c))})]})});const t="12 min",s=Math.max(1,((r==null?void 0:r.today_submissions)||1)-Math.floor(Math.random()*3)),n=((r==null?void 0:r.today_submissions)||0)/s*100-100,a=[{title:"Total Submissions",value:(r==null?void 0:r.total_submissions)||0,change:n,changeLabel:"vs yesterday",icon:er,color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-950"},{title:"Active Organizations",value:(r==null?void 0:r.active_organizations)||0,change:15,changeLabel:"weekly growth",icon:di,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-950"},{title:"Completion Rate",value:`${(r==null?void 0:r.completion_rate)||0}%`,change:2.3,changeLabel:"vs last week",icon:$e,color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-950"},{title:"Avg Time Spent",value:t,change:-5.2,changeLabel:"vs last week",icon:hi,color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-950"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Overview"}),l.jsx("p",{className:"text-muted-foreground",children:"Assessment platform performance at a glance"})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((o,c)=>l.jsxs(M,{children:[l.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ce,{className:"text-sm font-medium",children:o.title}),l.jsx("div",{className:D("p-2 rounded-lg",o.bgColor),children:l.jsx(o.icon,{className:D("h-4 w-4",o.color)})})]}),l.jsxs(xe,{children:[l.jsx("div",{className:"text-2xl font-bold",children:o.value}),l.jsx("div",{className:"flex items-center text-sm text-muted-foreground",children:o.change!==void 0&&l.jsxs(l.Fragment,{children:[o.change>0?l.jsx(fs,{className:"w-3 h-3 text-green-500 mr-1"}):l.jsx(Zs,{className:"w-3 h-3 text-red-500 mr-1"}),l.jsxs("span",{className:o.change>0?"text-green-600":"text-red-600",children:[Math.abs(o.change).toFixed(1),"%"]}),l.jsx("span",{className:"ml-1",children:o.changeLabel})]})})]})]},c))}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(M,{children:[l.jsxs(we,{children:[l.jsx(Ce,{children:"Assessment Progress"}),l.jsx(kt,{children:"Breakdown of submission statuses"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),l.jsx("span",{className:"text-sm",children:"Completed"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-sm font-medium mr-2",children:(r==null?void 0:r.completed_submissions)||0}),l.jsxs(fe,{variant:"secondary",children:[(r==null?void 0:r.completion_rate)||0,"%"]})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),l.jsx("span",{className:"text-sm",children:"In Progress"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-sm font-medium mr-2",children:((r==null?void 0:r.total_submissions)||0)-((r==null?void 0:r.completed_submissions)||0)}),l.jsxs(fe,{variant:"outline",children:[r!=null&&r.total_submissions?(100-((r==null?void 0:r.completion_rate)||0)).toFixed(0):0,"%"]})]})]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[l.jsx("span",{className:"text-sm font-medium",children:"Total Submissions"}),l.jsx("span",{className:"text-lg font-bold",children:(r==null?void 0:r.total_submissions)||0})]})]})})]}),l.jsxs(M,{children:[l.jsxs(we,{children:[l.jsx(Ce,{children:"Recent Activity"}),l.jsx(kt,{children:"Latest submission trends"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Today"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"New submissions"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-lg font-bold",children:(r==null?void 0:r.today_submissions)||0}),l.jsxs("div",{className:"flex items-center text-xs",children:[n>0?l.jsx(fs,{className:"w-3 h-3 text-green-500 mr-1"}):l.jsx(Zs,{className:"w-3 h-3 text-red-500 mr-1"}),l.jsxs("span",{className:n>0?"text-green-600":"text-red-600",children:[Math.abs(n).toFixed(0),"%"]})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"This Week"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Total submissions"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-lg font-bold",children:(r==null?void 0:r.week_submissions)||0}),l.jsxs("div",{className:"flex items-center text-xs",children:[l.jsx(fi,{className:"w-3 h-3 text-blue-500 mr-1"}),l.jsxs("span",{className:"text-blue-600",children:[(r==null?void 0:r.active_organizations)||0," orgs"]})]})]})]})]})})]})]})]})}const aa=x.forwardRef(({className:r,...e},t)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:t,className:D("w-full caption-bottom text-sm",r),...e})}));aa.displayName="Table";const oa=x.forwardRef(({className:r,...e},t)=>l.jsx("thead",{ref:t,className:D("[&_tr]:border-b",r),...e}));oa.displayName="TableHeader";const la=x.forwardRef(({className:r,...e},t)=>l.jsx("tbody",{ref:t,className:D("[&_tr:last-child]:border-0",r),...e}));la.displayName="TableBody";const yc=x.forwardRef(({className:r,...e},t)=>l.jsx("tfoot",{ref:t,className:D("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...e}));yc.displayName="TableFooter";const or=x.forwardRef(({className:r,...e},t)=>l.jsx("tr",{ref:t,className:D("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...e}));or.displayName="TableRow";const Ie=x.forwardRef(({className:r,...e},t)=>l.jsx("th",{ref:t,className:D("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...e}));Ie.displayName="TableHead";const Le=x.forwardRef(({className:r,...e},t)=>l.jsx("td",{ref:t,className:D("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...e}));Le.displayName="TableCell";const wc=x.forwardRef(({className:r,...e},t)=>l.jsx("caption",{ref:t,className:D("mt-4 text-sm text-muted-foreground",r),...e}));wc.displayName="TableCaption";const xc=fo,bc=mo,_c=ho,ca=x.forwardRef(({className:r,...e},t)=>l.jsx(Xn,{ref:t,className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));ca.displayName=Xn.displayName;const ua=x.forwardRef(({className:r,children:e,...t},s)=>l.jsxs(_c,{children:[l.jsx(ca,{}),l.jsxs(Zn,{ref:s,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,l.jsxs(uo,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(ri,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ua.displayName=Zn.displayName;const da=({className:r,...e})=>l.jsx("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});da.displayName="DialogHeader";const ha=x.forwardRef(({className:r,...e},t)=>l.jsx(ei,{ref:t,className:D("text-lg font-semibold leading-none tracking-tight",r),...e}));ha.displayName=ei.displayName;const fa=x.forwardRef(({className:r,...e},t)=>l.jsx(ti,{ref:t,className:D("text-sm text-muted-foreground",r),...e}));fa.displayName=ti.displayName;function me(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function tt(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const ma=6048e5,Sc=864e5;let jc={};function Es(){return jc}function Vt(r,e){var o,c,u,d;const t=Es(),s=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=me(r),i=n.getDay(),a=(i<s?7:0)+i-s;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function ps(r){return Vt(r,{weekStartsOn:1})}function pa(r){const e=me(r),t=e.getFullYear(),s=tt(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const n=ps(s),i=tt(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=ps(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Qr(r){const e=me(r);return e.setHours(0,0,0,0),e}function Jr(r){const e=me(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function kc(r,e){const t=Qr(r),s=Qr(e),n=+t-Jr(t),i=+s-Jr(s);return Math.round((n-i)/Sc)}function Tc(r){const e=pa(r),t=tt(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ps(t)}function Pc(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ec(r){if(!Pc(r)&&typeof r!="number")return!1;const e=me(r);return!isNaN(Number(e))}function Cc(r){const e=me(r),t=tt(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Nc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Oc=(r,e,t)=>{let s;const n=Nc[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Bs(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Ac={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ic={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lc={date:Bs({formats:Ac,defaultWidth:"full"}),time:Bs({formats:Rc,defaultWidth:"full"}),dateTime:Bs({formats:Ic,defaultWidth:"full"})},Dc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$c=(r,e,t,s)=>Dc[r];function At(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;n=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[o]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return n[i]}}const Mc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Uc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qc={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hc=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Vc={ordinalNumber:Hc,era:At({values:Mc,defaultWidth:"wide"}),quarter:At({values:Fc,defaultWidth:"wide",argumentCallback:r=>r-1}),month:At({values:Uc,defaultWidth:"wide"}),day:At({values:qc,defaultWidth:"wide"}),dayPeriod:At({values:Bc,defaultWidth:"wide",formattingValues:Wc,defaultFormattingWidth:"wide"})};function Rt(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;const a=i[0],o=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(o)?zc(o,h=>h.test(a)):Kc(o,h=>h.test(a));let u;u=r.valueCallback?r.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function Kc(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function zc(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Yc(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(n.length);return{value:a,rest:o}}}const Gc=/^(\d+)(th|st|nd|rd)?/i,Qc=/\d+/i,Jc={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xc={any:[/^b/i,/^(a|c)/i]},Zc={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eu={any:[/1/i,/2/i,/3/i,/4/i]},tu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},su={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ru={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},au={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ou={ordinalNumber:Yc({matchPattern:Gc,parsePattern:Qc,valueCallback:r=>parseInt(r,10)}),era:Rt({matchPatterns:Jc,defaultMatchWidth:"wide",parsePatterns:Xc,defaultParseWidth:"any"}),quarter:Rt({matchPatterns:Zc,defaultMatchWidth:"wide",parsePatterns:eu,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Rt({matchPatterns:tu,defaultMatchWidth:"wide",parsePatterns:su,defaultParseWidth:"any"}),day:Rt({matchPatterns:ru,defaultMatchWidth:"wide",parsePatterns:nu,defaultParseWidth:"any"}),dayPeriod:Rt({matchPatterns:iu,defaultMatchWidth:"any",parsePatterns:au,defaultParseWidth:"any"})},lu={code:"en-US",formatDistance:Oc,formatLong:Lc,formatRelative:$c,localize:Vc,match:ou,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cu(r){const e=me(r);return kc(e,Cc(e))+1}function uu(r){const e=me(r),t=+ps(e)-+Tc(e);return Math.round(t/ma)+1}function ga(r,e){var d,h,f,p;const t=me(r),s=t.getFullYear(),n=Es(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,a=tt(r,0);a.setFullYear(s+1,0,i),a.setHours(0,0,0,0);const o=Vt(a,e),c=tt(r,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=Vt(c,e);return t.getTime()>=o.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function du(r,e){var o,c,u,d;const t=Es(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,n=ga(r,e),i=tt(r,0);return i.setFullYear(n,0,s),i.setHours(0,0,0,0),Vt(i,e)}function hu(r,e){const t=me(r),s=+Vt(t,e)-+du(t,e);return Math.round(s/ma)+1}function L(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const Oe={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return L(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):L(t+1,2)},d(r,e){return L(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return L(r.getHours()%12||12,e.length)},H(r,e){return L(r.getHours(),e.length)},m(r,e){return L(r.getMinutes(),e.length)},s(r,e){return L(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),n=Math.trunc(s*Math.pow(10,t-3));return L(n,e.length)}},it={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xr={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),n=s>0?s:1-s;return t.ordinalNumber(n,{unit:"year"})}return Oe.y(r,e)},Y:function(r,e,t,s){const n=ga(r,s),i=n>0?n:1-n;if(e==="YY"){const a=i%100;return L(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):L(i,e.length)},R:function(r,e){const t=pa(r);return L(t,e.length)},u:function(r,e){const t=r.getFullYear();return L(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return L(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return L(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return Oe.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return L(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const n=hu(r,s);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):L(n,e.length)},I:function(r,e,t){const s=uu(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):L(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Oe.d(r,e)},D:function(r,e,t){const s=cu(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):L(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return L(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return L(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return L(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let n;switch(s===12?n=it.noon:s===0?n=it.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let n;switch(s>=17?n=it.evening:s>=12?n=it.afternoon:s>=4?n=it.morning:n=it.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Oe.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Oe.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):L(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):L(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Oe.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Oe.s(r,e)},S:function(r,e){return Oe.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return en(s);case"XXXX":case"XX":return Ye(s);case"XXXXX":case"XXX":default:return Ye(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return en(s);case"xxxx":case"xx":return Ye(s);case"xxxxx":case"xxx":default:return Ye(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zr(s,":");case"OOOO":default:return"GMT"+Ye(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zr(s,":");case"zzzz":default:return"GMT"+Ye(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return L(s,e.length)},T:function(r,e,t){const s=r.getTime();return L(s,e.length)}};function Zr(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Math.trunc(s/60),i=s%60;return i===0?t+String(n):t+String(n)+e+L(i,2)}function en(r,e){return r%60===0?(r>0?"-":"+")+L(Math.abs(r)/60,2):Ye(r,e)}function Ye(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=L(Math.trunc(s/60),2),i=L(s%60,2);return t+n+e+i}const tn=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},va=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fu=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],n=t[2];if(!n)return tn(r,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",tn(s,e)).replace("{{time}}",va(n,e))},mu={p:va,P:fu},pu=/^D+$/,gu=/^Y+$/,vu=["D","DD","YY","YYYY"];function yu(r){return pu.test(r)}function wu(r){return gu.test(r)}function xu(r,e,t){const s=bu(r,e,t);if(console.warn(s),vu.includes(r))throw new RangeError(s)}function bu(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _u=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Su=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ju=/^'([^]*?)'?$/,ku=/''/g,Tu=/[a-zA-Z]/;function rs(r,e,t){var d,h,f,p;const s=Es(),n=s.locale??lu,i=s.firstWeekContainsDate??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=s.weekStartsOn??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,o=me(r);if(!Ec(o))throw new RangeError("Invalid time value");let c=e.match(Su).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=mu[g];return v(m,n.formatLong)}return m}).join("").match(_u).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Pu(m)};if(Xr[g])return{isToken:!0,value:m};if(g.match(Tu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});n.localize.preprocessor&&(c=n.localize.preprocessor(o,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:n};return c.map(m=>{if(!m.isToken)return m.value;const g=m.value;(wu(g)||yu(g))&&xu(g,e,String(r));const v=Xr[g[0]];return v(o,g,n.localize,u)}).join("")}function Pu(r){const e=r.match(ju);return e?e[1].replace(ku,"'"):r}function Eu(){const{submissions:r,isLoading:e,fetchSubmissions:t,exportToCSV:s,deleteSubmission:n}=br(),[i,a]=x.useState([]),[o,c]=x.useState(""),[u,d]=x.useState("all"),[h,f]=x.useState(null),p=x.useMemo(()=>r.filter(w=>{var T,A,R;const j=!o||((T=w.organization_name)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))||((A=w.full_name)==null?void 0:A.toLowerCase().includes(o.toLowerCase()))||((R=w.email)==null?void 0:R.toLowerCase().includes(o.toLowerCase())),k=u==="all"||u==="completed"&&w.completed||u==="incomplete"&&!w.completed;return j&&k}),[r,o,u]),m=w=>{a(w?p.map(j=>j.id):[])},g=(w,j)=>{a(j?k=>[...k,w]:k=>k.filter(T=>T!==w))},v=()=>{const w=r.filter(j=>i.includes(j.id));s(w)},_=async()=>{if(confirm(`Delete ${i.length} submissions? This cannot be undone.`)){for(const w of i)await n(w);a([])}},S=w=>l.jsx(fe,{variant:w?"default":"secondary",children:w?"Completed":"In Progress"}),y=w=>{const j={TECH:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",REG:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",GEN:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"};return l.jsx(fe,{variant:"secondary",className:j[w],children:w})};return e?l.jsxs(M,{children:[l.jsx(we,{children:l.jsxs("div",{className:"animate-pulse space-y-2",children:[l.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),l.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]})}),l.jsx(xe,{children:l.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((w,j)=>l.jsx("div",{className:"h-16 bg-muted rounded"},j))})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Submissions"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage and review assessment submissions"})]})}),l.jsxs(M,{children:[l.jsxs(we,{children:[l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx(Ce,{children:"All Submissions"}),l.jsxs(kt,{children:[p.length," of ",r.length," submissions"]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(_o,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l.jsx(tr,{placeholder:"Search submissions...",value:o,onChange:w=>c(w.target.value),className:"pl-9 w-64"})]}),l.jsxs(So,{value:u,onValueChange:d,children:[l.jsxs(jo,{className:"w-40",children:[l.jsx(ko,{className:"mr-2 h-4 w-4"}),l.jsx(To,{})]}),l.jsxs(Po,{children:[l.jsx(Fs,{value:"all",children:"All Status"}),l.jsx(Fs,{value:"completed",children:"Completed"}),l.jsx(Fs,{value:"incomplete",children:"In Progress"})]})]})]})]}),i.length>0&&l.jsxs("div",{className:"flex items-center gap-2 p-4 bg-muted rounded-lg",children:[l.jsxs("span",{className:"text-sm font-medium",children:[i.length," selected"]}),l.jsxs(he,{size:"sm",variant:"outline",onClick:v,children:[l.jsx(mi,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),l.jsxs(he,{size:"sm",variant:"destructive",onClick:_,children:[l.jsx(Eo,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),l.jsx(xe,{children:l.jsxs("div",{className:"rounded-md border",children:[l.jsxs(aa,{children:[l.jsx(oa,{children:l.jsxs(or,{children:[l.jsx(Ie,{className:"w-12",children:l.jsx($r,{checked:i.length===p.length&&p.length>0,onCheckedChange:m})}),l.jsx(Ie,{children:"Organization"}),l.jsx(Ie,{children:"Contact"}),l.jsx(Ie,{children:"Track"}),l.jsx(Ie,{children:"Status"}),l.jsx(Ie,{children:"Date"}),l.jsx(Ie,{className:"w-20",children:"Actions"})]})}),l.jsx(la,{children:p.map(w=>l.jsxs(or,{children:[l.jsx(Le,{children:l.jsx($r,{checked:i.includes(w.id),onCheckedChange:j=>g(w.id,j)})}),l.jsx(Le,{children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(di,{className:"h-4 w-4 text-muted-foreground"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:w.organization_name||"Unknown Organization"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:w.industry||"No industry specified"})]})]})}),l.jsx(Le,{children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx(Co,{className:"h-3 w-3 mr-1 text-muted-foreground"}),w.full_name||"Anonymous"]}),w.email&&l.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[l.jsx(No,{className:"h-3 w-3 mr-1"}),w.email]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:w.role||"No role specified"})]})}),l.jsx(Le,{children:y(w.track)}),l.jsx(Le,{children:S(w.completed)}),l.jsxs(Le,{children:[l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx(Oo,{className:"h-3 w-3 mr-1 text-muted-foreground"}),rs(new Date(w.created_at),"MMM dd, yyyy")]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:rs(new Date(w.created_at),"HH:mm")})]}),l.jsx(Le,{children:l.jsxs(xc,{children:[l.jsx(bc,{asChild:!0,children:l.jsx(he,{size:"sm",variant:"outline",onClick:()=>f(w),children:l.jsx(Ao,{className:"h-4 w-4"})})}),l.jsxs(ua,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsxs(da,{children:[l.jsx(ha,{children:"Submission Details"}),l.jsx(fa,{children:"Detailed view of assessment submission"})]}),h&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Organization"}),l.jsx("p",{className:"text-sm",children:h.organization_name})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Contact"}),l.jsx("p",{className:"text-sm",children:h.full_name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:h.email})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Role"}),l.jsx("p",{className:"text-sm",children:h.role})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Industry"}),l.jsx("p",{className:"text-sm",children:h.industry})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Company Size"}),l.jsx("p",{className:"text-sm",children:h.company_size})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Track"}),y(h.track)]})]}),l.jsxs("div",{className:"pt-4 border-t",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Assessment Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsx("span",{children:"Status:"})," ",S(h.completed),l.jsx("span",{children:"Regulated:"})," ",l.jsx(fe,{variant:"outline",children:h.regulated?"Yes":"No"}),l.jsx("span",{children:"Created:"})," ",l.jsx("span",{children:rs(new Date(h.created_at),"PPpp")}),l.jsx("span",{children:"Updated:"})," ",l.jsx("span",{children:rs(new Date(h.updated_at),"PPpp")})]})]})]})]})]})})]},w.id))})]}),p.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-muted-foreground",children:"No submissions found matching your criteria."})})]})})]})]})}function Cu(){const[r,e]=x.useState(""),[t,s]=x.useState(""),[n,i]=x.useState(!1),[a,o]=x.useState(""),{user:c,isAdmin:u,signIn:d,isLoading:h}=wi();if(!h&&c&&u)return l.jsx(ai,{to:"/admin",replace:!0});const f=async p=>{p.preventDefault(),i(!0),o("");const{error:m}=await d(r,t);m&&o(m.message),i(!1)};return h?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(Xs,{className:"h-8 w-8 animate-spin"})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:l.jsxs(M,{className:"w-full max-w-md",children:[l.jsxs(we,{className:"text-center",children:[l.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-primary rounded-lg flex items-center justify-center",children:l.jsx(xr,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Ce,{className:"text-2xl",children:"Admin Portal"}),l.jsx(kt,{children:"Sign in to access the AI Readiness Assessment dashboard"})]}),l.jsx(xe,{children:l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Mr,{htmlFor:"email",children:"Email"}),l.jsx(tr,{id:"email",type:"email",placeholder:"admin@company.com",value:r,onChange:p=>e(p.target.value),required:!0,disabled:n})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Mr,{htmlFor:"password",children:"Password"}),l.jsx(tr,{id:"password",type:"password",value:t,onChange:p=>s(p.target.value),required:!0,disabled:n})]}),a&&l.jsx(oi,{variant:"destructive",children:l.jsx(li,{children:a})}),l.jsx(he,{type:"submit",className:"w-full",disabled:n,children:n?l.jsxs(l.Fragment,{children:[l.jsx(Xs,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}function Nu(r,e){if(!isNaN(Number(e)))return r===Number(e);const t=e.match(/^(\d+)-(\d+)$/);if(t){const[,o,c]=t;return r>=Number(o)&&r<=Number(c)}const s=e.match(/^>=(\d+)$/);if(s)return r>=Number(s[1]);const n=e.match(/^>(\d+)$/);if(n)return r>Number(n[1]);const i=e.match(/^<=(\d+)$/);if(i)return r<=Number(i[1]);const a=e.match(/^<(\d+)$/);return a?r<Number(a[1]):!1}function Ou(r,e,t){if(!t||Object.keys(t).length===0)return 50;let s=0,n=0;return Object.entries(t).forEach(([i,a])=>{const o=e.find(c=>(typeof c=="string"?c:c.value)===a);if(o&&typeof o=="object"&&o.score!==void 0)s+=o.score,n++;else{const c=e.findIndex(u=>(typeof u=="string"?u:u.value)===a);c>=0&&(s+=c/(e.length-1)*100,n++)}}),n>0?s/n:50}function Au(r,e,t){if(!r.length||!e.length)return 50;const n=e.slice(0,r.length).reduce((a,o)=>a+o,0),i=e.reduce((a,o)=>a+o,0);return i>0?n/i*100:0}const Ru=()=>{const r={};return gi.forEach(e=>{const t=e.category;t&&e.questions.forEach(s=>{r[s.id]={question:s,section:t}})}),r},Iu=Ru(),sn=pi.weight_vectors??{};function Lu(r,e){const t={},s={strategy:0,data:0,tools:0,automation:0,people:0,governance:0},n={strategy:0,data:0,tools:0,automation:0,people:0,governance:0};for(const[c,{question:u,section:d}]of Object.entries(Iu)){const h=r[c],f=Du(u,h);t[c]=f,s[d]+=f,n[d]+=1}const i={};Object.keys(s).forEach(c=>{const u=n[c]||0;i[c]=u>0?s[c]/u:0});const a=sn[e]??sn.GEN,o=Object.keys(i).reduce((c,u)=>{const d=a[u]??0;return c+i[u]*(d/100)},0);return{questionScores:t,sectionScores:i,totalScore:o,track:e}}function Du(r,e){if(e==null||e==="")return 50;if(typeof e=="string"&&e.toLowerCase().includes("don't know"))return 0;const{type:t,scoreMap:s,scorePer:n,cap:i,weight:a,options:o,scoreByCount:c}=r;if(c&&Array.isArray(e)){const u=e.length;for(const[d,h]of Object.entries(c))if(Nu(u,d))return Number(h)}if(Array.isArray(e)){if(t==="rank"&&a)return Au(e,a,(o==null?void 0:o.map(u=>u.value))||[]);if(n!==void 0)return Math.min(e.length*n,i??100);if(o){const u=e.map(d=>{const h=o.find(p=>p.value===d);if((h==null?void 0:h.score)!==void 0)return h.score;const f=o.findIndex(p=>p.value===d);return f>=0&&(s==null?void 0:s[f])!=null?s[f]:0});return u.length?u.reduce((d,h)=>d+h,0)/u.length:50}}if(typeof e=="boolean")return e?100:0;if(o&&typeof e=="string"){const u=o.find(h=>h.value===e);if((u==null?void 0:u.score)!==void 0)return u.score;const d=o.findIndex(h=>h.value===e);if(d>=0&&(s==null?void 0:s[d])!=null)return s[d]}if(t==="matrix"&&typeof e=="object"&&e!==null){const u=e,d=r.rows||[],h=r.columns||[];return Ou(d,h,u)}return typeof e=="number"?Math.max(0,Math.min(100,e)):50}function $u({responses:r,profile:e,track:t,submissionId:s,onRestart:n}){const i=r.reduce((g,{questionId:v,value:_})=>(g[v]=_,g),{}),{questionScores:a,sectionScores:o,totalScore:c}=Lu(i,t),u=pi.weight_vectors??{},d={strategy:0,data:0,tools:0,automation:0,people:0,governance:0},h=u[t]??u.GEN??d,f=Math.round(c),m=(g=>g>=80?{level:"Advanced",color:"bg-green-500",description:"Excellent AI readiness"}:g>=65?{level:"Intermediate",color:"bg-blue-500",description:"Good foundation with room for growth"}:g>=45?{level:"Developing",color:"bg-yellow-500",description:"Basic readiness, needs improvement"}:{level:"Beginner",color:"bg-red-500",description:"Significant development needed"})(f);return l.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"bg-gradient-primary bg-clip-text text-transparent",children:l.jsx("h1",{className:"text-4xl font-bold",children:"AI Readiness Assessment Results"})}),l.jsxs("p",{className:"text-lg text-muted-foreground",children:[e.M1," • ",e.M3," at ",e.M0]}),l.jsx(fe,{variant:"outline",className:"text-sm",children:t==="TECH"?"Technical Track":t==="REG"?"Regulated Track":"General Business Track"}),s&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assessment ID: ",l.jsx("code",{className:"font-mono bg-muted px-2 py-1 rounded text-xs",children:s})]})]}),l.jsx(M,{className:"p-8 text-center bg-gradient-accent border-0 shadow-glow",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"text-6xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:f}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(fe,{className:`${m.color} text-white px-4 py-2 text-lg`,children:m.level}),l.jsx("p",{className:"text-muted-foreground",children:m.description})]})]})}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(o).map(([g,v])=>{const _=h[g];return l.jsx(M,{className:"p-6 hover:shadow-elegant transition-all duration-300",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-semibold text-lg",children:g}),l.jsx("span",{className:"text-2xl font-bold text-primary",children:v})]}),l.jsx(ui,{value:v,className:"h-2"}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",_!==void 0?`${_}%`:"N/A"]})]})},g)})}),l.jsxs(M,{className:"p-8 space-y-6",children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[l.jsx(ci,{className:"h-6 w-6 text-primary"}),"Key Recommendations"]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-green-600",children:"Strengths"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 mt-2"}),"Leadership alignment on AI initiatives"]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 mt-2"}),"Strong technical foundation for AI implementation"]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 mt-2"}),"Good data management practices"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Areas for Improvement"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-500 mt-2"}),"Develop comprehensive AI governance framework"]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-500 mt-2"}),"Increase automation maturity across processes"]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-500 mt-2"}),"Enhance team AI capabilities and training"]})]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[l.jsxs(he,{className:"bg-gradient-primary hover:shadow-glow transition-all duration-300",children:[l.jsx(mi,{className:"h-4 w-4 mr-2"}),"Download Report"]}),l.jsxs(he,{variant:"outline",children:[l.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Share Results"]}),l.jsx(he,{variant:"outline",onClick:n,children:"Take Assessment Again"})]})]})}function ya(){const[r,e]=x.useState(!1),[t,s]=x.useState(null);return{saveAssessment:async(o,c,u="ai_readiness_v2")=>(console.warn("Database is empty - saveAssessment will be implemented in Phase 2"),$t.error("Assessment saving temporarily disabled during database rebuild"),null),loadAssessment:async o=>(console.warn("Database is empty - loadAssessment will be implemented in Phase 2"),$t.error("Assessment loading temporarily disabled during database rebuild"),null),getRecentAssessments:async(o=10)=>(console.warn("Database is empty - getRecentAssessments will be implemented in Phase 2"),[]),isLoading:r,error:t}}const Mu="modulepreload",Fu=function(r){return"/"+r},rn={},st=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=Fu(c),c in rn)return;rn[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Mu,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},wa={async checkServices(){const r={supabase:await this.checkSupabase(),assessment:await this.checkAssessment(),localStorage:this.checkLocalStorage()},e=Object.values(r).every(Boolean),t=Object.values(r).some(Boolean);return{status:e?"healthy":t?"degraded":"unhealthy",details:r}},async checkSupabase(){try{return await st(()=>Promise.resolve().then(()=>pf),void 0),!0}catch{return!1}},async checkAssessment(){try{const{assessmentSections:r}=await st(async()=>{const{assessmentSections:e}=await import("./assessment-DLIsiJJf.js").then(t=>t.al);return{assessmentSections:e}},__vite__mapDeps([0,1,2]));return r.length>0}catch{return!1}},checkLocalStorage(){try{const r="health-check";return localStorage.setItem(r,r),localStorage.removeItem(r),!0}catch{return!1}}};typeof window<"u"&&(window.__healthCheck=wa);const Uu=()=>{const r=vi(),[e,t]=x.useState("assessment"),[s,n]=x.useState(null),[i,a]=x.useState(null),{saveAssessment:o}=ya();x.useEffect(()=>{wa.checkServices().then(d=>{d.status!=="healthy"&&Ot.warn("Health check failed:",d.details)})},[]);const c=async(d,h)=>{if(Ot.log("📋 INDEX - Saving assessment with",Object.keys(d).length,"responses"),Object.keys(d).length===0)throw Ot.error("🚨 CRITICAL: No responses data to save!"),new Error("No responses data to save");const f=await o(d,h);if(f)Ot.log("✅ Assessment saved successfully, navigating to thank-you page"),a(f),r(`/thank-you?submissionId=${f}`,{state:{submissionId:f}});else throw Ot.error("❌ Failed to save assessment - no submission ID returned"),new Error("Failed to save assessment to database")},u=()=>{n(null),t("assessment")};return l.jsxs("div",{className:"min-h-screen bg-gradient-accent",children:[e==="assessment"&&l.jsx(Io,{onComplete:c}),e==="results"&&s&&l.jsx($u,{responses:Object.values(s.responses||{}),profile:s.profile,track:s.track,submissionId:i,onRestart:u})]})};var cs={linear:function(r,e,t,s){var n=t-e;return n*r/s+e},easeInQuad:function(r,e,t,s){var n=t-e;return n*(r/=s)*r+e},easeOutQuad:function(r,e,t,s){var n=t-e;return-n*(r/=s)*(r-2)+e},easeInOutQuad:function(r,e,t,s){var n=t-e;return(r/=s/2)<1?n/2*r*r+e:-n/2*(--r*(r-2)-1)+e},easeInCubic:function(r,e,t,s){var n=t-e;return n*(r/=s)*r*r+e},easeOutCubic:function(r,e,t,s){var n=t-e;return n*((r=r/s-1)*r*r+1)+e},easeInOutCubic:function(r,e,t,s){var n=t-e;return(r/=s/2)<1?n/2*r*r*r+e:n/2*((r-=2)*r*r+2)+e},easeInQuart:function(r,e,t,s){var n=t-e;return n*(r/=s)*r*r*r+e},easeOutQuart:function(r,e,t,s){var n=t-e;return-n*((r=r/s-1)*r*r*r-1)+e},easeInOutQuart:function(r,e,t,s){var n=t-e;return(r/=s/2)<1?n/2*r*r*r*r+e:-n/2*((r-=2)*r*r*r-2)+e},easeInQuint:function(r,e,t,s){var n=t-e;return n*(r/=s)*r*r*r*r+e},easeOutQuint:function(r,e,t,s){var n=t-e;return n*((r=r/s-1)*r*r*r*r+1)+e},easeInOutQuint:function(r,e,t,s){var n=t-e;return(r/=s/2)<1?n/2*r*r*r*r*r+e:n/2*((r-=2)*r*r*r*r+2)+e},easeInSine:function(r,e,t,s){var n=t-e;return-n*Math.cos(r/s*(Math.PI/2))+n+e},easeOutSine:function(r,e,t,s){var n=t-e;return n*Math.sin(r/s*(Math.PI/2))+e},easeInOutSine:function(r,e,t,s){var n=t-e;return-n/2*(Math.cos(Math.PI*r/s)-1)+e},easeInExpo:function(r,e,t,s){var n=t-e;return r==0?e:n*Math.pow(2,10*(r/s-1))+e},easeOutExpo:function(r,e,t,s){var n=t-e;return r==s?e+n:n*(-Math.pow(2,-10*r/s)+1)+e},easeInOutExpo:function(r,e,t,s){var n=t-e;return r===0?e:r===s?e+n:(r/=s/2)<1?n/2*Math.pow(2,10*(r-1))+e:n/2*(-Math.pow(2,-10*--r)+2)+e},easeInCirc:function(r,e,t,s){var n=t-e;return-n*(Math.sqrt(1-(r/=s)*r)-1)+e},easeOutCirc:function(r,e,t,s){var n=t-e;return n*Math.sqrt(1-(r=r/s-1)*r)+e},easeInOutCirc:function(r,e,t,s){var n=t-e;return(r/=s/2)<1?-n/2*(Math.sqrt(1-r*r)-1)+e:n/2*(Math.sqrt(1-(r-=2)*r)+1)+e},easeInElastic:function(r,e,t,s){var n=t-e,i,a,o;return o=1.70158,a=0,i=n,r===0?e:(r/=s)===1?e+n:(a||(a=s*.3),i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(r-=1))*Math.sin((r*s-o)*(2*Math.PI)/a))+e)},easeOutElastic:function(r,e,t,s){var n=t-e,i,a,o;return o=1.70158,a=0,i=n,r===0?e:(r/=s)===1?e+n:(a||(a=s*.3),i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*r)*Math.sin((r*s-o)*(2*Math.PI)/a)+n+e)},easeInOutElastic:function(r,e,t,s){var n=t-e,i,a,o;return o=1.70158,a=0,i=n,r===0?e:(r/=s/2)===2?e+n:(a||(a=s*(.3*1.5)),i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),r<1?-.5*(i*Math.pow(2,10*(r-=1))*Math.sin((r*s-o)*(2*Math.PI)/a))+e:i*Math.pow(2,-10*(r-=1))*Math.sin((r*s-o)*(2*Math.PI)/a)*.5+n+e)},easeInBack:function(r,e,t,s,n){var i=t-e;return n===void 0&&(n=1.70158),i*(r/=s)*r*((n+1)*r-n)+e},easeOutBack:function(r,e,t,s,n){var i=t-e;return n===void 0&&(n=1.70158),i*((r=r/s-1)*r*((n+1)*r+n)+1)+e},easeInOutBack:function(r,e,t,s,n){var i=t-e;return n===void 0&&(n=1.70158),(r/=s/2)<1?i/2*(r*r*(((n*=1.525)+1)*r-n))+e:i/2*((r-=2)*r*(((n*=1.525)+1)*r+n)+2)+e},easeInBounce:function(r,e,t,s){var n=t-e,i;return i=cs.easeOutBounce(s-r,0,n,s),n-i+e},easeOutBounce:function(r,e,t,s){var n=t-e;return(r/=s)<1/2.75?n*(7.5625*r*r)+e:r<2/2.75?n*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?n*(7.5625*(r-=2.25/2.75)*r+.9375)+e:n*(7.5625*(r-=2.625/2.75)*r+.984375)+e},easeInOutBounce:function(r,e,t,s){var n=t-e,i;return r<s/2?(i=cs.easeInBounce(r*2,0,n,s),i*.5+e):(i=cs.easeOutBounce(r*2-s,0,n,s),i*.5+n*.5+e)}},qu=cs;function Bu(r){return r*Math.PI/180}function se(r,e){return r+Math.random()*(e-r)}function Wu(r,e){return Math.floor(r+Math.random()*(e-r+1))}var Mt;(function(r){r[r.Circle=0]="Circle",r[r.Square=1]="Square",r[r.Strip=2]="Strip"})(Mt||(Mt={}));var Me;(function(r){r[r.Positive=1]="Positive",r[r.Negative=-1]="Negative"})(Me||(Me={}));const Hu=1e3/60;class Vu{constructor(e,t,s,n){this.getOptions=t;const{colors:i,initialVelocityX:a,initialVelocityY:o}=this.getOptions();this.context=e,this.x=s,this.y=n,this.w=se(5,20),this.h=se(5,20),this.radius=se(5,10),this.vx=typeof a=="number"?se(-a,a):se(a.min,a.max),this.vy=typeof o=="number"?se(-o,0):se(o.min,o.max),this.shape=Wu(0,2),this.angle=Bu(se(0,360)),this.angularSpin=se(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=se(0,1),this.rotationDirection=se(0,1)?Me.Positive:Me.Negative}update(e){const{gravity:t,wind:s,friction:n,opacity:i,drawShape:a}=this.getOptions(),o=e/Hu;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=t*o,this.vx+=s*o,this.vx*=n**o,this.vy*=n**o,this.rotateY>=1&&this.rotationDirection===Me.Positive?this.rotationDirection=Me.Negative:this.rotateY<=-1&&this.rotationDirection===Me.Negative&&(this.rotationDirection=Me.Positive);const c=.1*this.rotationDirection*o;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case Mt.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Mt.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Mt.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Ku{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=n=>{this.particles.splice(n,1)},this.getParticle=()=>{const n=se(this.x,this.w+this.x),i=se(this.y,this.h+this.y);return new Vu(this.context,this.getOptions,n,i)},this.animate=n=>{const{canvas:i,context:a,particlesGenerated:o,lastNumberOfPieces:c}=this,{run:u,recycle:d,numberOfPieces:h,debug:f,tweenFunction:p,tweenDuration:m}=this.getOptions();if(!u)return!1;const g=this.particles.length,v=d?g:o;if(v<h){c!==h&&(this.tweenProgress=0,this.tweenFrom=v,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(m,Math.max(0,this.tweenProgress+n));const _=p(this.tweenProgress,this.tweenFrom,h,m),S=Math.round(_-v);for(let y=0;y<S;y++)this.particles.push(this.getParticle());this.particlesGenerated+=S}f&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${g}`,i.width-10,i.height-20));for(let _=this.particles.length-1;_>=0;_--){const S=this.particles[_];S.update(n),(S.y>i.height||S.y<-100||S.x>i.width+100||S.x<-100)&&(d&&v<=h?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return g>0||v<h},this.canvas=e;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.getOptions=t}}const Er={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:qu.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class zu{constructor(e,t){this.lastFrameTime=0,this.setOptionsWithDefaults=n=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Er,...n},Object.assign(this,n.confettiSource)},this.update=(n=0)=>{const{options:{run:i,onConfettiComplete:a,frameRate:o},canvas:c,context:u}=this,d=Math.min(n-this.lastFrameTime,50);if(o&&d<1e3/o){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=n-(o?d%o:0),i&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.generator=new Ku(this.canvas,()=>this.options),this.options=t,this.update()}get options(){return this._options}set options(e){var n,i;const t=(n=this._options)==null?void 0:n.run,s=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&s===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&t===!1&&this.update()}}const Yu=hs.createRef();class Cr extends hs.Component{constructor(e){super(e),this.canvas=hs.createRef(),this.canvas=e.canvasRef||Yu}componentDidMount(){if(this.canvas.current){const e=Ws(this.props)[0];this.confetti=new zu(this.canvas.current,e)}}componentDidUpdate(){const e=Ws(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=Ws(this.props),s={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...t.style};return l.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...t,style:s})}}Cr.defaultProps={...Er};Cr.displayName="ReactConfetti";function Ws(r){const e={},t={},s={},n=[...Object.keys(Er),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const a in r){const o=r[a];n.includes(a)?e[a]=o:i.includes(a)?i[a]=o:s[a]=o}return[e,s,t]}const Gu=hs.forwardRef((r,e)=>l.jsx(Cr,{canvasRef:e,...r}));function Qu(){const r=yi();vi();const[e]=Lo(),{toast:t}=ni(),{loadAssessment:s}=ya(),{t:n}=Do(),[i,a]=x.useState(!0),[o,c]=x.useState(null),[u,d]=x.useState(!0),h=r.state,f=e.get("submissionId");x.useEffect(()=>{const j=setTimeout(()=>a(!1),5e3);return()=>clearTimeout(j)},[]),x.useEffect(()=>{(async()=>{if(f)try{const k=await s(f);k&&c({profile:k.profile,track:k.profile.track,responses:k.responses,submissionId:f})}catch{}d(!1)})()},[f,s]);const p={profile:{M0:"Demo Company",M1:"John Doe",M2:"john@demo.com",M3:"CTO/Tech Lead",M4_industry:"Technology",M5_country:"United States",M6_size:"50-249",track:"TECH"},track:"TECH",responses:{M0:"Demo Company",M1:"John Doe",M2:"john@demo.com",M3:"CTO/Tech Lead",M4_industry:"Technology",M5_country:"United States",M6_size:"50-249"},submissionId:"demo-123"};if(u&&f)return l.jsx("div",{className:"min-h-screen bg-gradient-accent flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Loading your results..."}),l.jsx("p",{className:"text-muted-foreground",children:"Please wait while we retrieve your assessment data."})]})});const m=o||h||p,{profile:g,track:v,responses:_}=m,S=j=>{switch(j){case"TECH":return n("tracks.technical");case"REG":return n("tracks.regulated");default:return n("tracks.general")}},y=j=>{t({title:n("thankYou.comingSoon.title"),description:n("thankYou.comingSoon.description",{feature:j})})},w=Object.keys(_).length;return l.jsxs("div",{className:"min-h-screen bg-gradient-accent",children:[i&&l.jsx(Gu,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200,gravity:.1}),l.jsx("div",{className:"absolute top-4 right-4 z-10",children:l.jsx($o,{})}),l.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[l.jsxs("div",{className:"text-center space-y-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 flex items-center justify-center animate-scale-in",children:l.jsx($e,{className:"w-10 h-10 text-green-600"})})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h1",{className:"text-4xl font-bold text-foreground",children:n("thankYou.title")}),l.jsx("p",{className:"text-lg text-primary",children:n("thankYou.subtitle")}),l.jsx("p",{className:"text-muted-foreground",children:n("thankYou.thankMessage",{company:g.M0})})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsx(M,{className:"p-6 text-center bg-blue-50 border-blue-200 hover-scale",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mx-auto",children:l.jsx($e,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.status.complete.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.status.complete.description")})]})}),l.jsx(M,{className:"p-6 text-center bg-yellow-50 border-yellow-200 hover-scale",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center mx-auto",children:l.jsx(hi,{className:"w-6 h-6 text-yellow-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.status.report.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.status.report.description")})]})}),l.jsx(M,{className:"p-6 text-center bg-green-50 border-green-200 hover-scale",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mx-auto",children:l.jsx(Mo,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.status.action.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.status.action.description")})]})})]}),l.jsxs(M,{className:"p-8 space-y-6",children:[l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-foreground",children:n("thankYou.overview.title")}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-3xl font-bold text-primary",children:w}),l.jsx("div",{className:"text-sm text-muted-foreground",children:n("thankYou.overview.questionsAnswered")})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-3xl font-bold text-primary",children:"8"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:n("thankYou.overview.keyAreas")})]}),l.jsx("div",{children:l.jsx(fe,{variant:"outline",className:"text-sm",children:S(v)})})]})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx(er,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{className:"font-semibold text-blue-900",children:n("thankYou.overview.reportNotice")})]}),l.jsx("p",{className:"text-sm text-blue-700",children:n("thankYou.overview.emailCheck")})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(M,{className:"p-6 hover-scale cursor-pointer",onClick:()=>y(n("thankYou.resources.implementation.title")),children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx(Fo,{className:"w-6 h-6 text-purple-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.resources.implementation.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.resources.implementation.description")})]})}),l.jsx(M,{className:"p-6 hover-scale cursor-pointer",onClick:()=>y(n("thankYou.resources.bestPractices.title")),children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center",children:l.jsx(er,{className:"w-6 h-6 text-indigo-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.resources.bestPractices.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.resources.bestPractices.description")})]})}),l.jsx(M,{className:"p-6 hover-scale cursor-pointer",onClick:()=>y(n("thankYou.resources.consultation.title")),children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center",children:l.jsx(fi,{className:"w-6 h-6 text-orange-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.resources.consultation.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.resources.consultation.description")})]})}),l.jsx(M,{className:"p-6 hover-scale cursor-pointer",onClick:()=>y(n("thankYou.resources.training.title")),children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:l.jsx(Uo,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.resources.training.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.resources.training.description")})]})}),l.jsx(M,{className:"p-6 hover-scale cursor-pointer",onClick:()=>y(n("thankYou.resources.community.title")),children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center",children:l.jsx(qo,{className:"w-6 h-6 text-pink-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.resources.community.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.resources.community.description")})]})}),l.jsx(M,{className:"p-6 hover-scale cursor-pointer",onClick:()=>y(n("thankYou.resources.calculator.title")),children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center",children:l.jsx(Bo,{className:"w-6 h-6 text-yellow-600"})}),l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.resources.calculator.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.resources.calculator.description")})]})})]}),l.jsxs(M,{className:"p-8 space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-center text-foreground",children:n("thankYou.reportIncludes.title")}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx($e,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.reportIncludes.maturityScore.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.reportIncludes.maturityScore.description")})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx($e,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.reportIncludes.analysis.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.reportIncludes.analysis.description")})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx($e,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.reportIncludes.recommendations.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.reportIncludes.recommendations.description")})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx($e,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-foreground",children:n("thankYou.reportIncludes.roadmap.title")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n("thankYou.reportIncludes.roadmap.description")})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[l.jsx(Wo,{to:"/",children:l.jsxs(he,{variant:"outline",className:"flex items-center gap-2",children:[l.jsx(Ho,{className:"w-4 h-4"}),n("thankYou.actions.retake")]})}),l.jsxs(he,{className:"bg-gradient-primary hover:shadow-glow transition-all duration-300",onClick:()=>window.open("https://www.houseofichigo.com","_blank"),children:[l.jsx(Vo,{className:"w-4 h-4 mr-2"}),n("thankYou.actions.website")]})]}),l.jsxs("div",{className:"text-center space-y-4 pt-8 border-t border-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:n("thankYou.footer.thankYou")}),l.jsx("p",{className:"text-sm text-muted-foreground max-w-2xl mx-auto",children:n("thankYou.footer.privacy")}),l.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xr,{className:"w-4 h-4"}),l.jsx("span",{children:n("thankYou.footer.dataProtected")})]}),l.jsx("span",{children:"•"}),l.jsx("span",{children:n("thankYou.footer.contact")})]}),l.jsxs("div",{className:"text-center space-y-2 opacity-60",children:[l.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.M0," • ",g.M3," • ",g.M4_industry]}),l.jsx(fe,{variant:"outline",className:"text-xs",children:S(v)})]})]})]})]})}const Ju=()=>{const r=yi();return x.useEffect(()=>{},[r.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Xu=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>st(async()=>{const{default:s}=await Promise.resolve().then(()=>Et);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Nr extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Zu extends Nr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nn extends Nr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class an extends Nr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lr;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(lr||(lr={}));var ed=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};class td{constructor(e,{headers:t={},customFetch:s,region:n=lr.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Xu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return ed(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:c}=t;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:d}).catch(g=>{throw new Zu(g)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new nn(h);if(!h.ok)throw new an(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield h.json():p==="application/octet-stream"?m=yield h.blob():p==="text/event-stream"?m=h:p==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof an||n instanceof nn?n.context:void 0}}})}}var te={},Or={},Cs={},Jt={},Ns={},Os={},sd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pt=sd();const rd=Pt.fetch,xa=Pt.fetch.bind(Pt),ba=Pt.Headers,nd=Pt.Request,id=Pt.Response,Et=Object.freeze(Object.defineProperty({__proto__:null,Headers:ba,Request:nd,Response:id,default:xa,fetch:rd},Symbol.toStringTag,{value:"Module"})),ad=po(Et);var As={};Object.defineProperty(As,"__esModule",{value:!0});let od=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};As.default=od;var _a=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});const ld=_a(ad),cd=_a(As);let ud=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ld.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,c;let u=null,d=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=_:d=JSON.parse(_))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await i.text();try{u=JSON.parse(g),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,p="OK")}catch{i.status===404&&g===""?(f=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new cd.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,o,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Os.default=ud;var dd=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ns,"__esModule",{value:!0});const hd=dd(Os);let fd=class extends hd.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ns.default=fd;var md=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});const pd=md(Ns);let gd=class extends pd.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Jt.default=gd;var vd=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cs,"__esModule",{value:!0});const It=vd(Jt);let yd=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new It.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){const o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new It.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new It.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new It.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new It.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Cs.default=yd;var Rs={},Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.version=void 0;Is.version="0.0.0-automated";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.DEFAULT_HEADERS=void 0;const wd=Is;Rs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wd.version}`};var Sa=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Or,"__esModule",{value:!0});const xd=Sa(Cs),bd=Sa(Jt),_d=Rs;let Sd=class ja{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},_d.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new xd.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ja(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let c;s||n?(a=s?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{o.searchParams.append(d,h)})):(a="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new bd.default({method:a,url:o,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Or.default=Sd;var Ct=ie&&ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(te,"__esModule",{value:!0});te.PostgrestError=te.PostgrestBuilder=te.PostgrestTransformBuilder=te.PostgrestFilterBuilder=te.PostgrestQueryBuilder=te.PostgrestClient=void 0;const ka=Ct(Or);te.PostgrestClient=ka.default;const Ta=Ct(Cs);te.PostgrestQueryBuilder=Ta.default;const Pa=Ct(Jt);te.PostgrestFilterBuilder=Pa.default;const Ea=Ct(Ns);te.PostgrestTransformBuilder=Ea.default;const Ca=Ct(Os);te.PostgrestBuilder=Ca.default;const Na=Ct(As);te.PostgrestError=Na.default;var jd=te.default={PostgrestClient:ka.default,PostgrestQueryBuilder:Ta.default,PostgrestFilterBuilder:Pa.default,PostgrestTransformBuilder:Ea.default,PostgrestBuilder:Ca.default,PostgrestError:Na.default};const{PostgrestClient:kd,PostgrestQueryBuilder:pm,PostgrestFilterBuilder:gm,PostgrestTransformBuilder:vm,PostgrestBuilder:ym,PostgrestError:wm}=jd;class Td{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);if(s>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const n=this.dynamicRequire("undici");if(n&&n.WebSocket)return{type:"native",constructor:n.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const n=this.dynamicRequire("ws");if(n)return{type:"ws",constructor:(t=n.WebSocket)!==null&&t!==void 0?t:n};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${s} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Pd="2.15.0",Ed=`realtime-js/${Pd}`,Cd="1.0.0",cr=1e4,Nd=1e3,Od=100;var Ft;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ft||(Ft={}));var B;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(B||(B={}));var de;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(de||(de={}));var ur;(function(r){r.websocket="websocket"})(ur||(ur={}));var Qe;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Qe||(Qe={}));class Ad{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class Oa{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})($||($={}));const on=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=Rd(a,r,e,n),i),{})},Rd=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?Aa(i,a):dr(a)},Aa=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return $d(e,t)}switch(r){case $.bool:return Id(e);case $.float4:case $.float8:case $.int2:case $.int4:case $.int8:case $.numeric:case $.oid:return Ld(e);case $.json:case $.jsonb:return Dd(e);case $.timestamp:return Md(e);case $.abstime:case $.date:case $.daterange:case $.int4range:case $.int8range:case $.money:case $.reltime:case $.text:case $.time:case $.timestamptz:case $.timetz:case $.tsrange:case $.tstzrange:return dr(e);default:return dr(e)}},dr=r=>r,Id=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ld=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Dd=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},$d=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Aa(e,o))}return r},Md=r=>typeof r=="string"?r.replace(" ","T"):r,Ra=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Hs{constructor(e,t,s={},n=cr){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ln;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ln||(ln={}));class Ut{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ut.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=Ut.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ut.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),m=d.filter(v=>p.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(o[u]=m),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const h=e[o].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...f)}s(o,d,c)}),this.map(a,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=u,n(o,u,c),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cn;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(cn||(cn={}));var qt;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(qt||(qt={}));var Pe;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Pe||(Pe={}));class Ar{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=B.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Hs(this,de.join,this.params,this.timeout),this.rejoinTimer=new Oa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=B.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=B.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this._on(de.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ut(this),this.broadcastEndpointURL=Ra(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==B.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[qt.PRESENCE]&&this.bindings[qt.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Pe.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Pe.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e==null||e(Pe.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,v=[];for(let _=0;_<g;_++){const S=m[_],{filter:{event:y,schema:w,table:j,filter:k}}=S,T=f&&f[_];if(T&&T.event===y&&T.schema===w&&T.table===j&&T.filter===k)v.push(Object.assign(Object.assign({},S),{id:T.id}));else{this.unsubscribe(),this.state=B.errored,e==null||e(Pe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Pe.SUBSCRIBED);return}}).receive("error",f=>{this.state=B.errored,e==null||e(Pe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===B.joined&&e===qt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=B.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(de.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Hs(this,de.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=B.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Hs(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Od){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=de;if(s&&[o,c,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(p=>p.callback(f,s)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var m,g,v,_,S,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const w=p.id,j=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((g=t.ids)===null||g===void 0?void 0:g.includes(w))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const w=(S=(_=p==null?void 0:p.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return w==="*"||w===((y=t==null?void 0:t.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:v,commit_timestamp:_,type:S,errors:y}=m;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:_,eventType:S,new:{},old:{},errors:y}),this._getPayloadRecords(m))}p.callback(f,s)})}_isClosed(){return this.state===B.closed}_isJoined(){return this.state===B.joined}_isJoining(){return this.state===B.joining}_isLeaving(){return this.state===B.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Ar.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(de.close,{},e)}_onError(e){this._on(de.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=B.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=on(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=on(e.columns,e.old_record)),t}}const un=()=>{},ns={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fd=[1e3,2e3,5e3,1e4],Ud=1e4,qd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Bd{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cr,this.transport=null,this.heartbeatIntervalMs=ns.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=un,this.ref=0,this.reconnectTimer=null,this.logger=un,this.conn=null,this.sendBuffer=[],this.serializer=new Ad,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...a)=>st(async()=>{const{default:o}=await Promise.resolve().then(()=>Et);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ur.websocket}`,this.httpEndpoint=Ra(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Td.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cd}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ft.connecting:return Qe.Connecting;case Ft.open:return Qe.Open;case Ft.closing:return Qe.Closing;default:return Qe.Closed}}isConnected(){return this.connectionState()===Qe.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Ar(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Nd,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ns.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:i,ref:a}=t,o=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${n} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(de.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([qd],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:Ed};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(de.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Oa(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ns.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,i,a,o,c,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:cr,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:ns.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:d=>Fd[d-1]||Ud,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Rr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function W(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Wd extends Rr{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hr extends Rr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Hd=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const Ia=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>st(async()=>{const{default:s}=await Promise.resolve().then(()=>Et);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Vd=()=>Hd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield st(()=>Promise.resolve().then(()=>Et),void 0)).Response:Response}),fr=r=>{if(Array.isArray(r))return r.map(t=>fr(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=fr(s)}),e},Kd=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var nt=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const Vs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),zd=(r,e,t)=>nt(void 0,void 0,void 0,function*(){const s=yield Vd();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{const i=r.status||500,a=(n==null?void 0:n.statusCode)||i+"";e(new Wd(Vs(n),i,a))}).catch(n=>{e(new hr(Vs(n),n))}):e(new hr(Vs(r),r))}),Yd=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?n:(Kd(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,Object.assign(Object.assign({},n),t))};function Xt(r,e,t,s,n,i){return nt(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,Yd(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>zd(c,o,s))})})}function gs(r,e,t,s){return nt(this,void 0,void 0,function*(){return Xt(r,"GET",e,t,s)})}function Ee(r,e,t,s,n){return nt(this,void 0,void 0,function*(){return Xt(r,"POST",e,s,n,t)})}function mr(r,e,t,s,n){return nt(this,void 0,void 0,function*(){return Xt(r,"PUT",e,s,n,t)})}function Gd(r,e,t,s){return nt(this,void 0,void 0,function*(){return Xt(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function La(r,e,t,s,n){return nt(this,void 0,void 0,function*(){return Xt(r,"DELETE",e,s,n,t)})}var ee=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const Qd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jd{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ia(n)}uploadOrUpdate(e,t,s,n){return ee(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},dn),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield(e=="PUT"?mr:Ee)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}})}upload(e,t,s){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return ee(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:dn.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield mr(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(W(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Ee(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Rr("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(W(s))return{data:null,error:s};throw s}})}update(e,t,s){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ee(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}})}copy(e,t,s){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield Ee(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return ee(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ee(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return ee(this,void 0,void 0,function*(){try{const n=yield Ee(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}})}download(e,t){return ee(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield gs(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(W(o))return{data:null,error:o};throw o}})}info(e){return ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield gs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:fr(s),error:null}}catch(s){if(W(s))return{data:null,error:s};throw s}})}exists(e){return ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Gd(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(W(s)&&s instanceof hr){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return ee(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(W(t))return{data:null,error:t};throw t}})}list(e,t,s){return ee(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Qd),t),{prefix:e||""});return{data:yield Ee(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Xd="2.10.4",Zd={"X-Client-Info":`storage-js/${Xd}`};var at=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};class eh{constructor(e,t={},s,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Zd),t),this.fetch=Ia(s)}listBuckets(){return at(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(W(e))return{data:null,error:e};throw e}})}getBucket(e){return at(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(W(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return at(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(W(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return at(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(W(s))return{data:null,error:s};throw s}})}emptyBucket(e){return at(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(W(t))return{data:null,error:t};throw t}})}deleteBucket(e){return at(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(W(t))return{data:null,error:t};throw t}})}}class th extends eh{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new Jd(this.url,this.headers,e,this.fetch)}}const sh="2.54.0";let Dt="";typeof Deno<"u"?Dt="deno":typeof document<"u"?Dt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dt="react-native":Dt="node";const rh={"X-Client-Info":`supabase-js-${Dt}/${sh}`},nh={headers:rh},ih={schema:"public"},ah={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oh={};var lh=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const ch=r=>{let e;return r?e=r:typeof fetch>"u"?e=xa:e=fetch,(...t)=>e(...t)},uh=()=>typeof Headers>"u"?ba:Headers,dh=(r,e,t)=>{const s=ch(t),n=uh();return(i,a)=>lh(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:r;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:u}))})};var hh=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};function fh(r){return r.endsWith("/")?r:r+"/"}function mh(r,e){var t,s;const{db:n,auth:i,realtime:a,global:o}=r,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>hh(this,void 0,void 0,function*(){return""})};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}const Da="2.71.1",mt=30*1e3,pr=3,Ks=pr*mt,ph="http://localhost:9999",gh="supabase.auth.token",vh={"X-Client-Info":`gotrue-js/${Da}`},gr="X-Supabase-Api-Version",$a={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wh=10*60*1e3;class Ir extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function C(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class xh extends Ir{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function bh(r){return C(r)&&r.name==="AuthApiError"}class Ma extends Ir{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ve extends Ir{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class De extends Ve{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _h(r){return C(r)&&r.name==="AuthSessionMissingError"}class is extends Ve{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class as extends Ve{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class os extends Ve{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sh(r){return C(r)&&r.name==="AuthImplicitGrantRedirectError"}class hn extends Ve{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vr extends Ve{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zs(r){return C(r)&&r.name==="AuthRetryableFetchError"}class fn extends Ve{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class yr extends Ve{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mn=` 	
\r=`.split(""),jh=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<mn.length;e+=1)r[mn[e].charCodeAt(0)]=-2;for(let e=0;e<vs.length;e+=1)r[vs[e].charCodeAt(0)]=e;return r})();function pn(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(vs[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(vs[s]),e.queuedBits-=6}}function Fa(r,e,t){const s=jh[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function gn(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{Ph(a,s,t)};for(let a=0;a<r.length;a+=1)Fa(r.charCodeAt(a),n,i);return e.join("")}function kh(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Th(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}kh(s,e)}}function Ph(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Eh(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Fa(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Ch(r){const e=[];return Th(r,t=>e.push(t)),new Uint8Array(e)}function Nh(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>pn(n,t,s)),pn(null,t,s),e.join("")}function Oh(r){return Math.round(Date.now()/1e3)+r}function Ah(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const le=()=>typeof window<"u"&&typeof document<"u",Ke={tested:!1,writable:!1},Ua=()=>{if(!le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ke.tested)return Ke.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ke.tested=!0,Ke.writable=!0}catch{Ke.tested=!0,Ke.writable=!1}return Ke.writable};function Rh(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const qa=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>st(async()=>{const{default:s}=await Promise.resolve().then(()=>Et);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ih=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",pt=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},ze=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ae=async(r,e)=>{await r.removeItem(e)};class Ls{constructor(){this.promise=new Ls.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ls.promiseConstructor=Promise;function Ys(r){const e=r.split(".");if(e.length!==3)throw new yr("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!yh.test(e[s]))throw new yr("JWT not in base64url format");return{header:JSON.parse(gn(e[0])),payload:JSON.parse(gn(e[1])),signature:Eh(e[2]),raw:{header:e[0],payload:e[1]}}}async function Lh(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Dh(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function $h(r){return("0"+r.toString(16)).substr(-2)}function Mh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,$h).join("")}async function Fh(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Uh(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Fh(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ot(r,e,t=!1){const s=Mh();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await pt(r,`${e}-code-verifier`,n);const i=await Uh(s);return[i,s===i?"plain":"s256"]}const qh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bh(r){const e=r.headers.get(gr);if(!e||!e.match(qh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wh(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Hh(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lt(r){if(!Vh.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gs(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vn(r){return JSON.parse(JSON.stringify(r))}var Kh=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Ge=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),zh=[502,503,504];async function yn(r){var e;if(!Ih(r))throw new vr(Ge(r),0);if(zh.includes(r.status))throw new vr(Ge(r),r.status);let t;try{t=await r.json()}catch(i){throw new Ma(Ge(i),i)}let s;const n=Bh(r);if(n&&n.getTime()>=$a["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new fn(Ge(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new De}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new fn(Ge(t),r.status,t.weak_password.reasons);throw new xh(Ge(t),r.status||500,s)}const Yh=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function O(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[gr]||(i[gr]=$a["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Gh(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Gh(r,e,t,s,n,i){const a=Yh(e,s,n,i);let o;try{o=await r(t,Object.assign({},a))}catch(c){throw console.error(c),new vr(Ge(c),0)}if(o.ok||await yn(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await yn(c)}}function Te(r){var e;let t=null;Zh(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Oh(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function wn(r){const e=Te(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Fe(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Qh(r){return{data:r,error:null}}function Jh(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=Kh(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function Xh(r){return r}function Zh(r){return r.access_token&&r.refresh_token&&r.expires_in}const Qs=["global","local","others"];var ef=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class tf{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=qa(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Qs[0]){if(Qs.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qs.join(", ")}`);try{return await O(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await O(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Fe})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ef(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await O(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Jh,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await O(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fe})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await O(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Xh});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(C(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){lt(e);try{return await O(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fe})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){lt(e);try{return await O(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Fe})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){lt(e);try{return await O(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Fe})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){lt(e.userId);try{const{data:t,error:s}=await O(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){lt(e.userId),lt(e.id);try{return{data:await O(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}}function xn(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function sf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ct={debug:!!(globalThis&&Ua()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ba extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rf extends Ba{}async function nf(r,e,t){ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ct.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw ct.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new rf(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ct.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}sf();const af={url:ph,storageKey:gh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bn(r,e,t){return await t()}const ut={};class Kt{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kt.nextInstanceID,Kt.nextInstanceID+=1,this.instanceID>0&&le()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},af),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new tf({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=qa(n.fetch),this.lock=n.lock||bn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:le()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=nf:this.lock=bn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Ua()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xn(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=xn(this.memoryStorage)),le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ut[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ut[this.storageKey]=Object.assign(Object.assign({},ut[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ut[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ut[this.storageKey]=Object.assign(Object.assign({},ut[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Da}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Rh(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),le()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Sh(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new Ma("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Te}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ot(this.storage,this.storageKey)),i=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Te})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Te})}else throw new as("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:wn})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:wn})}else throw new as("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new is}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,a,o,c,u,d,h,f,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:v,wallet:_,statement:S,options:y}=e;let w;if(le())if(typeof _=="object")w=_;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))w=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const j=new URL((t=y==null?void 0:y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in w&&w.signIn){const k=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),S?{statement:S}:null));let T;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")T=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)T=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),g=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${j.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(n=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const k=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:v,error:_}=await O(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Nh(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Te});if(_)throw _;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new is}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:_})}catch(v){if(C(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const t=await ze(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:a}=await O(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Te});if(await Ae(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new is}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(C(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await O(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Te}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new is}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ot(this.storage,this.storageKey));const{error:h}=await O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new as("You must provide either an email or phone number.")}catch(o){if(C(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await O(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Te});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(C(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await ot(this.storage,this.storageKey)),await O(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Qh})}catch(i){if(C(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new De;const{error:n}=await O(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await O(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await O(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new as("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ze(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ks:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await ze(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Gs()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fe}):await this._useSession(async t=>{var s,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new De}:await O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Fe})})}catch(t){if(C(t))return _h(t)&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new De;const a=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await ot(this.storage,this.storageKey));const{data:u,error:d}=await O(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Fe});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new De;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:a}=Ys(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new De;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!le())throw new os("No browser detected.");if(e.error||e.error_description||e.error_code)throw new os(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new hn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new os("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hn("No code detected.");const{data:S,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:c,token_type:u}=e;if(!i||!o||!a||!u)throw new os("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=mt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const _={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(s){if(C(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ze(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(bh(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ah(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await ot(this.storage,this.storageKey,!0));try{return await O(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(C(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await O(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return le()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(C(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await O(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Dh(async n=>(n>0&&await Lh(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await O(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Te})),(n,i)=>{const a=200*Math.pow(2,n);return i&&zs(i)&&Date.now()+a-s<mt})}catch(s){if(this._debug(t,"error",s),C(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),le()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await ze(this.storage,this.storageKey);if(n&&this.userStorage){let a=await ze(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await pt(this.userStorage,this.storageKey+"-user",a)),n.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Gs()}else if(n&&!n.user&&!n.user){const a=await ze(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(n.user=a.user,await Ae(this.storage,this.storageKey+"-user"),await pt(this.storage,this.storageKey,n)):n.user=Gs()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ks;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Ks}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),zs(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(n.access_token);!o&&(a!=null&&a.user)?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new De;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ls;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new De;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),C(i)){const a={session:null,error:i};return zs(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await pt(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const i=vn(n);await pt(this.storage,this.storageKey,i)}else{const n=vn(t);await pt(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Ae(this.storage,this.storageKey),await Ae(this.storage,this.storageKey+"-code-verifier"),await Ae(this.storage,this.storageKey+"-user"),this.userStorage&&await Ae(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/mt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${mt}ms, refresh threshold is ${pr} ticks`),n<=pr&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ba)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await ot(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await O(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await O(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await O(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await O(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ys(n.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+wh>n)return s;const{data:i,error:a}=await O(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};s=p.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:c}}=Ys(s);t!=null&&t.allowExpired||Wh(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:n,signature:a},error:null}}const d=Hh(n.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Ch(`${o}.${c}`)))throw new yr("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}}Kt.nextInstanceID=0;const of=Kt;class lf extends of{constructor(e){super(e)}}var cf=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};class uf{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=fh(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:ih,realtime:oh,auth:Object.assign(Object.assign({},ah),{storageKey:u}),global:nh},h=mh(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=dh(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new kd(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new th(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new td(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return cf(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:o,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lf({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Bd(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const df=(r,e,t)=>new uf(r,e,t);function hf(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}hf()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ff="https://ursnkjhyeupfvlnahuyh.supabase.co",mf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyc25ramh5ZXVwZnZsbmFodXloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1OTE4OTIsImV4cCI6MjA3MDE2Nzg5Mn0.qqZ3thy2Q5NKARonhDNj4CfCua5slLhRWCqu49eopsM",us=df(ff,mf,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),pf=Object.freeze(Object.defineProperty({__proto__:null,supabase:us},Symbol.toStringTag,{value:"Module"}));function gf(){const r=x.useRef(!1);x.useEffect(()=>{if(r.current)return;r.current=!0,(async()=>{try{const t=gi.map((n,i)=>({id:n.id,category:n.category??null,purpose:n.purpose??null,sequence:i+1,questions:(n.questions||[]).map((a,o)=>({id:a.id,text:a.text,type:a.type,helper:a.helper??null,required:a.required??null,sequence:o+1,showIf:a.showIf??null,hideIf:a.hideIf??null,scoreMap:a.scoreMap??null,scorePer:a.scorePer??null,cap:a.cap??null,scoreFormula:a.scoreFormula??null,weight:a.weight??null,maxRank:a.maxRank??null,maxSelect:a.maxSelect??null,scoreByCount:a.scoreByCount??null}))})),{error:s}=await us.rpc("seed_assessment",{_sections:t});if(s)console.warn("Seed RPC error:",s.message),$t.error(`Seeding failed: ${s.message}`);else{const[{count:n},{count:i}]=await Promise.all([us.from("questions").select("*",{count:"exact",head:!0}),us.from("sections").select("*",{count:"exact",head:!0})]);$t.success(`Seeded OK. Sections: ${i??0}, Questions: ${n??0}`),console.info("Seeding completed",{sections:i,questions:n})}}catch(t){console.warn("Seed init failed:",t),$t.error("Seed init failed")}})()},[])}const vf=new dc,yf=()=>(gf(),l.jsx(mc,{children:l.jsx(fc,{client:vf,children:l.jsx(Bl,{children:l.jsxs(Qo,{children:[l.jsx(xl,{}),l.jsx(kl,{}),l.jsx(Ko,{children:l.jsxs(zo,{children:[l.jsx(je,{path:"/",element:l.jsx(Uu,{})}),l.jsx(je,{path:"/thank-you",element:l.jsx(Qu,{})}),l.jsx(je,{path:"/admin/login",element:l.jsx(Cu,{})}),l.jsxs(je,{path:"/admin/*",element:l.jsx(pc,{children:l.jsx(Jo,{})}),children:[l.jsx(je,{index:!0,element:l.jsx(gc,{})}),l.jsx(je,{path:"overview",element:l.jsx(vc,{})}),l.jsx(je,{path:"submissions",element:l.jsx(Eu,{})}),l.jsx(je,{path:"analytics",element:l.jsx(Xo,{})})]}),l.jsx(je,{path:"*",element:l.jsx(Ju,{})})]})})]})})})})),E=r=>typeof r=="string",Lt=()=>{let r,e;const t=new Promise((s,n)=>{r=s,e=n});return t.resolve=r,t.reject=e,t},_n=r=>r==null?"":""+r,wf=(r,e,t)=>{r.forEach(s=>{e[s]&&(t[s]=e[s])})},xf=/###/g,Sn=r=>r&&r.indexOf("###")>-1?r.replace(xf,"."):r,jn=r=>!r||E(r),Bt=(r,e,t)=>{const s=E(e)?e.split("."):e;let n=0;for(;n<s.length-1;){if(jn(r))return{};const i=Sn(s[n]);!r[i]&&t&&(r[i]=new t),Object.prototype.hasOwnProperty.call(r,i)?r=r[i]:r={},++n}return jn(r)?{}:{obj:r,k:Sn(s[n])}},kn=(r,e,t)=>{const{obj:s,k:n}=Bt(r,e,Object);if(s!==void 0||e.length===1){s[n]=t;return}let i=e[e.length-1],a=e.slice(0,e.length-1),o=Bt(r,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=Bt(r,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=t},bf=(r,e,t,s)=>{const{obj:n,k:i}=Bt(r,e,Object);n[i]=n[i]||[],n[i].push(t)},ys=(r,e)=>{const{obj:t,k:s}=Bt(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},_f=(r,e,t)=>{const s=ys(r,t);return s!==void 0?s:ys(e,t)},Wa=(r,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in r?E(r[s])||r[s]instanceof String||E(e[s])||e[s]instanceof String?t&&(r[s]=e[s]):Wa(r[s],e[s],t):r[s]=e[s]);return r},dt=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jf=r=>E(r)?r.replace(/[&<>"'\/]/g,e=>Sf[e]):r;class kf{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Tf=[" ",",","?","!",";"],Pf=new kf(20),Ef=(r,e,t)=>{e=e||"",t=t||"";const s=Tf.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const n=Pf.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!n.test(r);if(!i){const a=r.indexOf(t);a>0&&!n.test(r.substring(0,a))&&(i=!0)}return i},wr=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const s=e.split(t);let n=r;for(let i=0;i<s.length;){if(!n||typeof n!="object")return;let a,o="";for(let c=i;c<s.length;++c)if(c!==i&&(o+=t),o+=s[c],a=n[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<s.length-1)continue;i+=c-i+1;break}n=a}return n},zt=r=>r==null?void 0:r.replace("_","-"),Cf={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){var t,s;(s=(t=console==null?void 0:console[r])==null?void 0:t.apply)==null||s.call(t,console,e)}};class ws{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Cf,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,n){return n&&!this.debug?null:(E(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ws(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ws(this.logger,e)}}var be=new ws;class Ds{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const n=this.observers[s].get(t)||0;this.observers[s].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([n,i])=>{for(let a=0;a<i;a++)n(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let a=0;a<i;a++)n.apply(n,[e,...t])})}}class Tn extends Ds{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,n={}){var u,d;const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,a=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],s&&(Array.isArray(s)?o.push(...s):E(s)&&i?o.push(...s.split(i)):o.push(s)));const c=ys(this.data,o);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=o[0],t=o[1],s=o.slice(2).join(".")),c||!a||!E(s)?c:wr((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[t],s,i)}addResource(e,t,s,n,i={silent:!1}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(o=e.split("."),n=t,t=o[1]),this.addNamespaces(t),kn(this.data,o,n),i.silent||this.emit("added",e,t,s,n)}addResources(e,t,s,n={silent:!1}){for(const i in s)(E(s[i])||Array.isArray(s[i]))&&this.addResource(e,t,i,s[i],{silent:!0});n.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,n,i,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),n=s,s=t,t=o[1]),this.addNamespaces(t);let c=ys(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),n?Wa(c,s,i):c={...c,...s},kn(this.data,o,c),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var Ha={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,s,n){return r.forEach(i=>{var a;e=((a=this.processors[i])==null?void 0:a.process(e,t,s,n))??e}),e}};const Pn={},En=r=>!E(r)&&typeof r!="boolean"&&typeof r!="number";class xs extends Ds{constructor(e,t={}){super(),wf(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=be.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(e==null)return!1;const n=this.resolve(e,s);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Ef(e,s,n);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:E(i)?[i]:i};const u=e.split(s);(s!==n||s===n&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(n)}return{key:e,namespaces:E(i)?[i]:i}}translate(e,t,s){let n=typeof t=="object"?{...t}:t;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],n),u=c[c.length-1];let d=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return f?i?{res:`${u}${d}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:`${u}${d}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:o;const p=this.resolve(e,n);let m=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||o,v=(p==null?void 0:p.exactUsedKey)||o,_=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,w=n.count!==void 0&&!E(n.count),j=xs.hasDefaultValue(n),k=w?this.pluralResolver.getSuffix(h,n.count,n):"",T=n.ordinal&&w?this.pluralResolver.getSuffix(h,n.count,{ordinal:!1}):"",A=w&&!n.ordinal&&n.count===0,R=A&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${k}`]||n[`defaultValue${T}`]||n.defaultValue;let U=m;y&&!m&&j&&(U=R);const Ne=En(U),_e=Object.prototype.toString.apply(U);if(y&&U&&Ne&&_.indexOf(_e)<0&&!(E(S)&&Array.isArray(U))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Y=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,U,{...n,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(p.res=Y,p.usedParams=this.getUsedParamsDetails(n),p):Y}if(a){const Y=Array.isArray(U),P=Y?[]:{},G=Y?v:g;for(const q in U)if(Object.prototype.hasOwnProperty.call(U,q)){const Q=`${G}${a}${q}`;j&&!m?P[q]=this.translate(Q,{...n,defaultValue:En(R)?R[q]:void 0,joinArrays:!1,ns:c}):P[q]=this.translate(Q,{...n,joinArrays:!1,ns:c}),P[q]===Q&&(P[q]=U[q])}m=P}}else if(y&&E(S)&&Array.isArray(m))m=m.join(S),m&&(m=this.extendTranslation(m,e,n,s));else{let Y=!1,P=!1;!this.isValidLookup(m)&&j&&(Y=!0,m=R),this.isValidLookup(m)||(P=!0,m=o);const q=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:m,Q=j&&R!==m&&this.options.updateMissing;if(P||Y||Q){if(this.logger.log(Q?"updateKey":"missingKey",h,u,o,Q?R:m),a){const J=this.resolve(o,{...n,keySeparator:!1});J&&J.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ae=[];const Se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Se&&Se[0])for(let J=0;J<Se.length;J++)ae.push(Se[J]);else this.options.saveMissingTo==="all"?ae=this.languageUtils.toResolveHierarchy(n.lng||this.language):ae.push(n.lng||this.language);const Zt=(J,oe,pe)=>{var Lr;const Nt=j&&pe!==m?pe:q;this.options.missingKeyHandler?this.options.missingKeyHandler(J,u,oe,Nt,Q,n):(Lr=this.backendConnector)!=null&&Lr.saveMissing&&this.backendConnector.saveMissing(J,u,oe,Nt,Q,n),this.emit("missingKey",J,u,oe,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?ae.forEach(J=>{const oe=this.pluralResolver.getSuffixes(J,n);A&&n[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(pe=>{Zt([J],o+pe,n[`defaultValue${pe}`]||R)})}):Zt(ae,o,R))}m=this.extendTranslation(m,e,n,p,s),P&&m===o&&this.options.appendNamespaceToMissingKey&&(m=`${u}${d}${o}`),(P||Y)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${o}`:o,Y?m:void 0,n))}return i?(p.res=m,p.usedParams=this.getUsedParamsDetails(n),p):m}extendTranslation(e,t,s,n,i){var c,u;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=E(e)&&(((u=s==null?void 0:s.interpolation)==null?void 0:u.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let f=s.replace&&!E(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,s.lng||this.language||n.usedLng,s),d){const p=e.match(this.interpolator.nestingRegexp),m=p&&p.length;h<m&&(s.nest=!1)}!s.lng&&n&&n.res&&(s.lng=this.language||n.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(i==null?void 0:i[0])===p[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):this.translate(...p,t),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,o=E(a)?[a]:a;return e!=null&&(o!=null&&o.length)&&s.applyPostProcessor!==!1&&(e=Ha.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,n,i,a,o;return E(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(s))return;const u=this.extractFromKey(c,t),d=u.key;n=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=t.count!==void 0&&!E(t.count),p=f&&!t.ordinal&&t.count===0,m=t.context!==void 0&&(E(t.context)||typeof t.context=="number")&&t.context!=="",g=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(v=>{var _,S;this.isValidLookup(s)||(o=v,!Pn[`${g[0]}-${v}`]&&((_=this.utils)!=null&&_.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(o))&&(Pn[`${g[0]}-${v}`]=!0,this.logger.warn(`key "${n}" for languages "${g.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{var k;if(this.isValidLookup(s))return;a=y;const w=[d];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(w,d,y,v,t);else{let T;f&&(T=this.pluralResolver.getSuffix(y,t.count,t));const A=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(w.push(d+T),t.ordinal&&T.indexOf(R)===0&&w.push(d+T.replace(R,this.options.pluralSeparator)),p&&w.push(d+A)),m){const U=`${d}${this.options.contextSeparator}${t.context}`;w.push(U),f&&(w.push(U+T),t.ordinal&&T.indexOf(R)===0&&w.push(U+T.replace(R,this.options.pluralSeparator)),p&&w.push(U+A))}}let j;for(;j=w.pop();)this.isValidLookup(s)||(i=j,s=this.getResource(y,v,j,t))}))})}),{res:s,usedKey:n,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,n={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,s,n):this.resourceStore.getResource(e,t,s,n)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!E(e.replace);let n=s?e.replace:e;if(s&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(const i of t)delete n[i]}return n}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class Cn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=be.create("languageUtils")}getScriptPartFromCode(e){if(e=zt(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=zt(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(E(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const n=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const n=this.getScriptPartFromCode(s);if(this.isSupportedCode(n))return t=n;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(a=>{if(a===i)return a;if(!(a.indexOf("-")<0&&i.indexOf("-")<0)&&(a.indexOf("-")>0&&i.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===i||a.indexOf(i)===0&&i.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),E(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),n=[],i=a=>{a&&(this.isSupportedCode(a)?n.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return E(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):E(e)&&i(this.formatLanguageCode(e)),s.forEach(a=>{n.indexOf(a)<0&&i(this.formatLanguageCode(a))}),n}}const Nn={zero:0,one:1,two:2,few:3,many:4,other:5},On={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Nf{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=be.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=zt(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(s,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),On;if(!e.match(/-|_/))return On;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[i]=a,a}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(n=>`${t}${n}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((n,i)=>Nn[n]-Nn[i]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,t,s={}){const n=this.getRule(e,s);return n?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const An=(r,e,t,s=".",n=!0)=>{let i=_f(r,e,t);return!i&&n&&E(t)&&(i=wr(r,t,s),i===void 0&&(i=wr(e,t,s))),i},Js=r=>r.replace(/\$/g,"$$$$");class Of{constructor(e={}){var t;this.logger=be.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(s=>s),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:n,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:g,nestingOptionsSeparator:v,maxReplaces:_,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:jf,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?dt(i):a||"{{",this.suffix=o?dt(o):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=f?dt(f):p||dt("$t("),this.nestingSuffix=m?dt(m):g||dt(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=_||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>(t==null?void 0:t.source)===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,s,n){var p;let i,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const S=An(t,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,s,{...n,...t,interpolationkey:m}):S}const g=m.split(this.formatSeparator),v=g.shift().trim(),_=g.join(this.formatSeparator).trim();return this.format(An(t,c,v,this.options.keySeparator,this.options.ignoreJSONStructure),_,s,{...n,...t,interpolationkey:v})};this.resetRegExp();const d=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=n==null?void 0:n.interpolation)==null?void 0:p.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Js(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Js(this.escape(m)):Js(m)}].forEach(m=>{for(o=0;i=m.regex.exec(e);){const g=i[1].trim();if(a=u(g),a===void 0)if(typeof d=="function"){const _=d(e,i,n);a=E(_)?_:""}else if(n&&Object.prototype.hasOwnProperty.call(n,g))a="";else if(h){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),a="";else!E(a)&&!this.useRawValueToEscape&&(a=_n(a));const v=m.safeValue(a);if(e=e.replace(i[0],v),h?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,s={}){let n,i,a;const o=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,a);const p=f.match(/'/g),m=f.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),u&&(a={...u,...a})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${d}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;n=this.nestingRegexp.exec(e);){let c=[];a={...s},a=a.replace&&!E(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(u!==-1&&(c=n[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),n[1]=n[1].slice(0,u)),i=t(o.call(this,n[1].trim(),a),a),i&&n[0]===e&&!E(i))return i;E(i)||(i=_n(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),i=""),c.length&&(i=c.reduce((d,h)=>this.format(d,h,s.lng,{...s,interpolationkey:n[1].trim()}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const Af=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const s=r.split("(");e=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();t[d]||(t[d]=u),u==="false"&&(t[d]=!1),u==="true"&&(t[d]=!0),isNaN(u)||(t[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},Rn=r=>{const e={};return(t,s,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const a=s+JSON.stringify(i);let o=e[a];return o||(o=r(zt(s),n),e[a]=o),o(t)}},Rf=r=>(e,t,s)=>r(zt(t),s)(e);class If{constructor(e={}){this.logger=be.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?Rn:Rf;this.formats={number:s((n,i)=>{const a=new Intl.NumberFormat(n,{...i});return o=>a.format(o)}),currency:s((n,i)=>{const a=new Intl.NumberFormat(n,{...i,style:"currency"});return o=>a.format(o)}),datetime:s((n,i)=>{const a=new Intl.DateTimeFormat(n,{...i});return o=>a.format(o)}),relativetime:s((n,i)=>{const a=new Intl.RelativeTimeFormat(n,{...i});return o=>a.format(o,i.range||"day")}),list:s((n,i)=>{const a=new Intl.ListFormat(n,{...i});return o=>a.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Rn(t)}format(e,t,s,n={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{var h;const{formatName:u,formatOptions:d}=Af(c);if(this.formats[u]){let f=o;try{const p=((h=n==null?void 0:n.formatParams)==null?void 0:h[n.interpolationkey])||{},m=p.locale||p.lng||n.locale||n.lng||s;f=this.formats[u](o,m,{...d,...n,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const Lf=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class Df extends Ds{constructor(e,t,s,n={}){var i,a;super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=n,this.logger=be.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(a=(i=this.backend)==null?void 0:i.init)==null||a.call(i,s,n.backend,n)}queueLoad(e,t,s,n){const i={},a={},o={},c={};return e.forEach(u=>{let d=!0;t.forEach(h=>{const f=`${u}|${h}`;!s.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,d=!1,a[f]===void 0&&(a[f]=!0),i[f]===void 0&&(i[f]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(o[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,s){const n=e.split("|"),i=n[0],a=n[1];t&&this.emit("failedLoading",i,a,t),!t&&s&&this.store.addResourceBundle(i,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(c=>{bf(c.loaded,[i],a),Lf(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{o[u]||(o[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,s,n=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:n,wait:i,callback:a});return}this.readingCalls++;const o=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,n+1,i*2,a)},i);return}a(u,d)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(d=>o(null,d)).catch(o):o(null,u)}catch(u){o(u)}return}return c(e,t,o)}prepareLoading(e,t,s={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();E(e)&&(e=this.languageUtils.toResolveHierarchy(e)),E(t)&&(t=[t]);const i=this.queueLoad(e,t,s,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),n=s[0],i=s[1];this.read(n,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${i} for language ${n} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${n}`,o),this.loaded(e,a,o)})}saveMissing(e,t,s,n,i,a={},o=()=>{}){var c,u,d,h,f;if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((f=this.backend)!=null&&f.create){const p={...a,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let g;m.length===5?g=m(e,t,s,n,p):g=m(e,t,s,n),g&&typeof g.then=="function"?g.then(v=>o(null,v)).catch(o):o(null,g)}catch(g){o(g)}else m(e,t,s,n,o,p)}!e||!e[0]||this.store.addResource(e[0],t,s,n)}}}const In=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),E(r[1])&&(e.defaultValue=r[1]),E(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ln=r=>{var e,t;return E(r.ns)&&(r.ns=[r.ns]),E(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),E(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((t=(e=r.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},ls=()=>{},$f=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Yt extends Ds{constructor(e={},t){if(super(),this.options=Ln(e),this.services={},this.logger=be,this.modules={external:[]},$f(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(E(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=In();this.options={...s,...this.options,...Ln(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?be.init(n(this.modules.logger),this.options):be.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=If;const d=new Cn(this.options);this.store=new Tn(this.options.resources,this.options);const h=this.services;h.logger=be,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new Nf(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=n(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Of(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Df(n(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(p,...m)=>{this.emit(p,...m)}),this.modules.languageDetector&&(h.languageDetector=n(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=n(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new xs(this.services,this.options),this.translator.on("*",(p,...m)=>{this.emit(p,...m)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ls),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const o=Lt(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),t(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(e,t=ls){var i,a;let s=t;const n=E(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};n?c(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(a=(i=this.options.preload)==null?void 0:i.forEach)==null||a.call(i,u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(u)})}else s(null)}reloadResources(e,t,s){const n=Lt();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=ls),this.services.backendConnector.reload(e,t,i=>{n.resolve(),s(i)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ha.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=Lt();this.emit("languageChanging",e);const n=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,c)=>{c?this.isLanguageChangingTo===e&&(n(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...u)=>this.t(...u)),t&&t(o,(...u)=>this.t(...u))},a=o=>{var d,h;!e&&!o&&this.services.languageDetector&&(o=[]);const c=E(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(E(o)?[o]:o);u&&(this.language||n(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,f=>{i(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,s){const n=(i,a,...o)=>{let c;typeof a!="object"?c=this.options.overloadTranslationOptionHandler([i,a].concat(o)):c={...a},c.lng=c.lng||n.lng,c.lngs=c.lngs||n.lngs,c.ns=c.ns||n.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||n.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(i)?d=i.map(h=>`${c.keyPrefix}${u}${h}`):d=c.keyPrefix?`${c.keyPrefix}${u}${i}`:i,this.t(d,c)};return E(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=s,n}t(...e){var t;return(t=this.translator)==null?void 0:t.translate(...e)}exists(...e){var t;return(t=this.translator)==null?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const u=this.services.backendConnector.state[`${o}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!n||a(i,e)))}loadNamespaces(e,t){const s=Lt();return this.options.ns?(E(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{s.resolve(),t&&t(n)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=Lt();E(e)&&(e=[e]);const n=this.options.preload||[],i=e.filter(a=>n.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=n.concat(i),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){var n,i;if(e||(e=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((i=this.services)==null?void 0:i.languageUtils)||new Cn(In());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Yt(e,t)}cloneInstance(e={},t=ls){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},i=new Yt(n);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const o=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});i.store=new Tn(o,n),i.services.resourceStore=i.store}return i.translator=new xs(i.services,n),i.translator.on("*",(o,...c)=>{i.emit(o,...c)}),i.init(n,t),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const z=Yt.createInstance();z.createInstance=Yt.createInstance;z.createInstance;z.dir;z.init;z.loadResources;z.reloadResources;z.use;z.changeLanguage;z.getFixedT;z.t;z.exists;z.setDefaultNamespace;z.hasLoadedNamespace;z.loadNamespaces;z.loadLanguages;const{slice:Mf,forEach:Ff}=[];function Uf(r){return Ff.call(Mf.call(arguments,1),e=>{if(e)for(const t in e)r[t]===void 0&&(r[t]=e[t])}),r}function qf(r){return typeof r!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(r))}const Dn=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Bf=function(r,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(e);let i=`${r}=${n}`;if(s.maxAge>0){const a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(a)}`}if(s.domain){if(!Dn.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!Dn.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},$n={create(r,e,t,s){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+t*60*1e3)),s&&(n.domain=s),document.cookie=Bf(r,e,n)},read(r){const e=`${r}=`,t=document.cookie.split(";");for(let s=0;s<t.length;s++){let n=t[s];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(e)===0)return n.substring(e.length,n.length)}return null},remove(r,e){this.create(r,"",-1,e)}};var Wf={name:"cookie",lookup(r){let{lookupCookie:e}=r;if(e&&typeof document<"u")return $n.read(e)||void 0},cacheUserLanguage(r,e){let{lookupCookie:t,cookieMinutes:s,cookieDomain:n,cookieOptions:i}=e;t&&typeof document<"u"&&$n.create(t,r,s,n,i)}},Hf={name:"querystring",lookup(r){var s;let{lookupQuerystring:e}=r,t;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const a=n.substring(1).split("&");for(let o=0;o<a.length;o++){const c=a[o].indexOf("=");c>0&&a[o].substring(0,c)===e&&(t=a[o].substring(c+1))}}return t}},Vf={name:"hash",lookup(r){var n;let{lookupHash:e,lookupFromHashIndex:t}=r,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const a=i.substring(1);if(e){const o=a.split("&");for(let c=0;c<o.length;c++){const u=o[c].indexOf("=");u>0&&o[c].substring(0,u)===e&&(s=o[c].substring(u+1))}}if(s)return s;if(!s&&t>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(n=o[typeof t=="number"?t:0])==null?void 0:n.replace("/",""):void 0}}}return s}};let ht=null;const Mn=()=>{if(ht!==null)return ht;try{if(ht=typeof window<"u"&&window.localStorage!==null,!ht)return!1;const r="i18next.translate.boo";window.localStorage.setItem(r,"foo"),window.localStorage.removeItem(r)}catch{ht=!1}return ht};var Kf={name:"localStorage",lookup(r){let{lookupLocalStorage:e}=r;if(e&&Mn())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupLocalStorage:t}=e;t&&Mn()&&window.localStorage.setItem(t,r)}};let ft=null;const Fn=()=>{if(ft!==null)return ft;try{if(ft=typeof window<"u"&&window.sessionStorage!==null,!ft)return!1;const r="i18next.translate.boo";window.sessionStorage.setItem(r,"foo"),window.sessionStorage.removeItem(r)}catch{ft=!1}return ft};var zf={name:"sessionStorage",lookup(r){let{lookupSessionStorage:e}=r;if(e&&Fn())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupSessionStorage:t}=e;t&&Fn()&&window.sessionStorage.setItem(t,r)}},Yf={name:"navigator",lookup(r){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:s,language:n}=navigator;if(t)for(let i=0;i<t.length;i++)e.push(t[i]);s&&e.push(s),n&&e.push(n)}return e.length>0?e:void 0}},Gf={name:"htmlTag",lookup(r){let{htmlTag:e}=r,t;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(t=s.getAttribute("lang")),t}},Qf={name:"path",lookup(r){var n;let{lookupFromPathIndex:e}=r;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(n=t[typeof e=="number"?e:0])==null?void 0:n.replace("/",""):void 0}},Jf={name:"subdomain",lookup(r){var n,i;let{lookupFromSubdomainIndex:e}=r;const t=typeof e=="number"?e+1:1,s=typeof window<"u"&&((i=(n=window.location)==null?void 0:n.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[t]}};let Va=!1;try{document.cookie,Va=!0}catch{}const Ka=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Va||Ka.splice(1,1);const Xf=()=>({order:Ka,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:r=>r});class za{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Uf(t,this.options||{},Xf()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(Wf),this.addDetector(Hf),this.addDetector(Kf),this.addDetector(zf),this.addDetector(Yf),this.addDetector(Gf),this.addDetector(Qf),this.addDetector(Jf),this.addDetector(Vf)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(s=>{if(this.detectors[s]){let n=this.detectors[s].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(s=>s!=null&&!qf(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}za.type="languageDetector";const Zf={translation:{navigation:{home:"Home",assessment:"Assessment",admin:"Admin",login:"Login",logout:"Logout"},common:{next:"Next",previous:"Previous",submit:"Submit",cancel:"Cancel",save:"Save",edit:"Edit",delete:"Delete",confirm:"Confirm",back:"Back",continue:"Continue",complete:"Complete",loading:"Loading...",submitting:"Submitting...",completeAssessment:"Complete Assessment",startAssessment:"Start Assessment",viewResults:"View Results",downloadReport:"Download Report"},language:{selectLanguage:"Select Language",english:"English",french:"Français",switchTo:"Switch to {{language}}"},assessment:{title:"AI Readiness Assessment v2.0",subtitle:"Evaluate your organization's AI readiness",welcome:{title:"Welcome to the AI Readiness Assessment",description:"This comprehensive assessment will evaluate your organization's preparedness for AI implementation across 8 key dimensions.",estimatedTime:"Estimated time: 15-20 minutes",getStarted:"Get Started"},progress:{sectionOf:"Section {{current}} of {{total}}",questionsRemaining:"{{count}} questions remaining",track:"Track: {{track}}",trackInfo:"Based on your role and industry, we've customized the questions for your track",complete:"Complete",sectionsComplete:"Sections complete",sectionsRemaining:"Sections remaining",questionsRemaining_plural:"Questions remaining",generalTrack:"General Track"},validation:{required:"This field is required",email:"Please enter a valid email address",completeMissing:"Please complete all required questions",someQuestionsNeed:"Some questions still need your input."},consent:{accept:"I agree to the data processing terms",required:"You must accept to continue",dataProcessing:"By proceeding, you agree to process your data for this readiness report and related communications."},additionalQuestions:"Additional Questions",thankYou:{title:"Assessment Complete!",message:"Thank you for completing the AI Readiness Assessment. Your results are being processed.",nextSteps:"What's next?",reportReady:"Your personalized report will be ready shortly",emailSent:"We'll send you a copy via email",dashboard:"Access your admin dashboard for detailed insights"}},form:{organizationName:"Organization Name",fullName:"Full Name",email:"Email Address",role:"Your Role",industry:"Industry",country:"Country",size:"Organization Size",revenue:"Annual Revenue",pleaseSelect:"Please select...",enterText:"Enter text...",other:"Other",specifyOther:"Please specify",preferNotToSay:"Prefer not to say",basicInformation:"Basic Information",organizationDetails:"Organization Details",enterOrgName:"Enter your organization name",enterFullName:"Enter your full name",enterEmail:"your.name@company.com",selectRole:"Select your primary role...",selectIndustry:"Select your industry...",selectCountry:"Select your country..."},notifications:{success:"Success!",error:"Error",warning:"Warning",info:"Information",assessmentSaved:"Assessment progress saved",assessmentCompleted:"Assessment completed successfully",errorSaving:"Error saving assessment",errorCompleting:"Error completing assessment. Please try again or contact support.",tryAgain:"Please try again",contactSupport:"or contact support"},admin:{dashboard:"Admin Dashboard",overview:"Overview",submissions:"Submissions",analytics:"Analytics",executive:"Executive Dashboard",totalSubmissions:"Total Submissions",averageScore:"Average Score",completionRate:"Completion Rate",topIndustries:"Top Industries",recentSubmissions:"Recent Submissions",exportData:"Export Data",viewDetails:"View Details",filters:"Filters",dateRange:"Date Range",searchSubmissions:"Search submissions..."},errors:{pageNotFound:"Page Not Found",goHome:"Go Home",somethingWrong:"Something went wrong",tryRefresh:"Try refreshing the page",loginRequired:"Login Required",accessDenied:"Access Denied"},sections:{section_0:"Organization Profile",section_1:"Strategy & Use-Case Readiness",section_2:"Budget, Runway & Compliance",section_3:"Data Foundation & Security",section_4:"Tool Stack & Integration",section_5:"Automation & AI Agents",section_6:"Team Capability & Culture",section_7:"Governance, Risk & Ethics",section_8:"Implementation Horizon & Vision"},tracks:{TECH:"Technical / Data Lead",REG:"Regulatory / Compliance",GEN:"General Business",technical:"Technical Track",regulated:"Regulated Track",general:"General Business Track"},sizeBreakpoints:{micro:"micro",small:"small",medium:"medium",large:"large",enterprise:"enterprise"},thankYou:{title:"Assessment Complete",subtitle:"8 key areas evaluated with detailed analysis",thankMessage:"Thank you, {{company}} team, for completing our comprehensive AI readiness assessment",status:{complete:{title:"Assessment Complete",description:"8 key areas evaluated with detailed analysis"},report:{title:"Report Available Soon",description:"We will email your personalized report within 3 business days"},action:{title:"Take Action",description:"Implement recommendations to advance your AI journey"}},overview:{title:"Assessment Overview",questionsAnswered:"Questions Answered",keyAreas:"Key Areas Evaluated",reportNotice:"We will send you your detailed AI readiness report within 3 business days",emailCheck:"Please check your inbox (and spam folder) to receive your personalized assessment results"},resources:{implementation:{title:"Implementation Guides",description:"Step-by-step guides to implement AI solutions"},bestPractices:{title:"Best Practices Library",description:"Industry best practices and case studies"},consultation:{title:"Expert Consultation",description:"One-on-one sessions with AI experts"},training:{title:"Training Resources",description:"Comprehensive training programs for your team"},community:{title:"Community Access",description:"Connect with other AI-forward organizations"},calculator:{title:"ROI Calculator",description:"Calculate potential return on AI investments"}},reportIncludes:{title:"Your report includes",maturityScore:{title:"AI Maturity Score",description:"Overall assessment of the 8 key areas"},analysis:{title:"Detailed Analysis by Section",description:"Identification of strengths and areas for improvement"},recommendations:{title:"Operational Recommendations",description:"Concrete steps to advance your AI journey"},roadmap:{title:"Implementation Roadmap",description:"Prioritized timeline for AI adoption"}},actions:{retake:"Retake Assessment",website:"Visit Our Website"},footer:{thankYou:"Thank you for your participation",privacy:"Your data helps us improve our assessment and provide more relevant insights on AI readiness. We are committed to protecting your privacy and will only use your information to provide you with the requested assessment results and related resources.",dataProtected:"Data Privacy Protected",contact:"Contact: support@houseofichigo.com"},comingSoon:{title:"Coming Soon!",description:"{{feature}} will be available soon. We'll notify you when it's ready."}}}},em={translation:{navigation:{home:"Accueil",assessment:"Évaluation",admin:"Admin",login:"Connexion",logout:"Déconnexion"},common:{next:"Suivant",previous:"Précédent",submit:"Soumettre",cancel:"Annuler",save:"Enregistrer",edit:"Modifier",delete:"Supprimer",confirm:"Confirmer",back:"Retour",continue:"Continuer",complete:"Terminer",loading:"Chargement...",submitting:"Soumission...",completeAssessment:"Terminer l'évaluation",startAssessment:"Commencer l'évaluation",viewResults:"Voir les résultats",downloadReport:"Télécharger le rapport"},language:{selectLanguage:"Choisir la langue",english:"English",french:"Français",switchTo:"Passer à {{language}}"},assessment:{title:"Évaluation de maturité IA v2.0",subtitle:"Évaluez la maturité IA de votre organisation",welcome:{title:"Bienvenue dans l'évaluation de maturité IA",description:"Cette évaluation complète analysera la préparation de votre organisation pour l'implémentation de l'IA à travers 8 dimensions clés.",estimatedTime:"Durée estimée : 15-20 minutes",getStarted:"Commencer"},progress:{sectionOf:"Section {{current}} sur {{total}}",questionsRemaining:"{{count}} questions restantes",track:"Filière : {{track}}",trackInfo:"En fonction de votre rôle et secteur, nous avons personnalisé les questions pour votre filière",complete:"Terminé",sectionsComplete:"Sections terminées",sectionsRemaining:"Sections restantes",questionsRemaining_plural:"Questions restantes",generalTrack:"Filière générale"},validation:{required:"Ce champ est requis",email:"Veuillez saisir une adresse e-mail valide",completeMissing:"Veuillez compléter toutes les questions requises",someQuestionsNeed:"Certaines questions nécessitent encore votre attention."},consent:{accept:"J'accepte les conditions de traitement des données",required:"Vous devez accepter pour continuer",dataProcessing:"En continuant, vous acceptez le traitement de vos données pour ce rapport de préparation et les communications associées."},additionalQuestions:"Questions supplémentaires",thankYou:{title:"Évaluation terminée !",message:"Merci d'avoir complété l'évaluation de maturité IA. Vos résultats sont en cours de traitement.",nextSteps:"Prochaines étapes ?",reportReady:"Votre rapport personnalisé sera prêt sous peu",emailSent:"Nous vous enverrons une copie par e-mail",dashboard:"Accédez à votre tableau de bord admin pour des insights détaillés"}},form:{organizationName:"Nom de l'organisation",fullName:"Nom complet",email:"Adresse e-mail",role:"Votre rôle",industry:"Secteur d'activité",country:"Pays",size:"Taille de l'organisation",revenue:"Chiffre d'affaires annuel",pleaseSelect:"Veuillez sélectionner...",enterText:"Saisir le texte...",other:"Autre",specifyOther:"Veuillez préciser",preferNotToSay:"Préfère ne pas dire",basicInformation:"Informations de base",organizationDetails:"Détails de l'organisation",enterOrgName:"Saisissez le nom de votre organisation",enterFullName:"Saisissez votre nom complet",enterEmail:"votre.nom@entreprise.com",selectRole:"Sélectionnez votre rôle principal...",selectIndustry:"Sélectionnez votre secteur...",selectCountry:"Sélectionnez votre pays..."},notifications:{success:"Succès !",error:"Erreur",warning:"Avertissement",info:"Information",assessmentSaved:"Progression de l'évaluation sauvegardée",assessmentCompleted:"Évaluation terminée avec succès",errorSaving:"Erreur lors de la sauvegarde de l'évaluation",errorCompleting:"Erreur lors de la finalisation de l'évaluation. Veuillez réessayer ou contacter le support.",tryAgain:"Veuillez réessayer",contactSupport:"ou contacter le support"},admin:{dashboard:"Tableau de bord Admin",overview:"Vue d'ensemble",submissions:"Soumissions",analytics:"Analytique",executive:"Tableau de bord exécutif",totalSubmissions:"Total des soumissions",averageScore:"Score moyen",completionRate:"Taux de completion",topIndustries:"Principaux secteurs",recentSubmissions:"Soumissions récentes",exportData:"Exporter les données",viewDetails:"Voir les détails",filters:"Filtres",dateRange:"Plage de dates",searchSubmissions:"Rechercher des soumissions..."},errors:{pageNotFound:"Page non trouvée",goHome:"Retour à l'accueil",somethingWrong:"Quelque chose s'est mal passé",tryRefresh:"Essayez de rafraîchir la page",loginRequired:"Connexion requise",accessDenied:"Accès refusé"},sections:{section_0:"Profil de l'organisation",section_1:"Stratégie et maturité des cas d'usage",section_2:"Budget, trésorerie et conformité",section_3:"Fondation des données et sécurité",section_4:"Stack d'outils et intégration",section_5:"Automatisation et agents IA",section_6:"Capacités de l'équipe et culture",section_7:"Gouvernance, risque et éthique",section_8:"Horizon d'implémentation et vision"},tracks:{TECH:"Technique / Responsable données",REG:"Réglementaire / Conformité",GEN:"Affaires générales",technical:"Filière technique",regulated:"Filière réglementée",general:"Filière affaires générales"},sizeBreakpoints:{micro:"micro",small:"petite",medium:"moyenne",large:"grande",enterprise:"entreprise"},thankYou:{title:"Évaluation terminée",subtitle:"8 domaines clés évalués avec analyse détaillée",thankMessage:"Merci, équipe {{company}}, d'avoir complété notre évaluation complète de préparation à l'IA",status:{complete:{title:"Évaluation terminée",description:"8 domaines clés évalués avec analyse détaillée"},report:{title:"Rapport disponible bientôt",description:"Nous vous enverrons votre rapport personnalisé dans les 3 jours ouvrables"},action:{title:"Passer à l'action",description:"Mettre en œuvre les recommandations pour faire progresser votre parcours IA"}},overview:{title:"Aperçu de l'évaluation",questionsAnswered:"Questions répondues",keyAreas:"Domaines clés évalués",reportNotice:"Nous vous enverrons votre rapport détaillé de préparation à l'IA dans les 3 jours ouvrables",emailCheck:"Veuillez vérifier votre boîte de réception (et dossier spam) pour recevoir vos résultats d'évaluation personnalisés"},resources:{implementation:{title:"Guides de mise en œuvre",description:"Guides étape par étape pour implémenter les solutions IA"},bestPractices:{title:"Bibliothèque de meilleures pratiques",description:"Meilleures pratiques de l'industrie et études de cas"},consultation:{title:"Consultation d'experts",description:"Sessions individuelles avec des experts IA"},training:{title:"Ressources de formation",description:"Programmes de formation complets pour votre équipe"},community:{title:"Accès communauté",description:"Connectez-vous avec d'autres organisations orientées IA"},calculator:{title:"Calculateur de ROI",description:"Calculez le retour potentiel sur les investissements IA"}},reportIncludes:{title:"Votre rapport inclut",maturityScore:{title:"Score de maturité IA",description:"Évaluation globale des 8 domaines clés"},analysis:{title:"Analyse détaillée par section",description:"Identification des forces et des domaines d'amélioration"},recommendations:{title:"Recommandations opérationnelles",description:"Étapes concrètes pour faire progresser votre parcours IA"},roadmap:{title:"Feuille de route de mise en œuvre",description:"Calendrier priorisé pour l'adoption de l'IA"}},actions:{retake:"Refaire l'évaluation",website:"Visiter notre site web"},footer:{thankYou:"Merci de votre participation",privacy:"Vos données nous aident à améliorer notre évaluation et à fournir des informations plus pertinentes sur la préparation à l'IA. Nous nous engageons à protéger votre vie privée et n'utiliserons vos informations que pour vous fournir les résultats d'évaluation demandés et les ressources connexes.",dataProtected:"Confidentialité des données protégée",contact:"Contact : support@houseofichigo.com"},comingSoon:{title:"Bientôt disponible !",description:"{{feature}} sera disponible prochainement. Nous vous préviendrons quand ce sera prêt."}}}};z.use(za).use(Yo).init({fallbackLng:"en",lng:"en",debug:!1,detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},interpolation:{escapeValue:!1},resources:{en:Zf,fr:em}});const Ya=document.getElementById("root");if(!Ya)throw new Error("Root element not found");xi(Ya).render(l.jsx(yf,{}));
